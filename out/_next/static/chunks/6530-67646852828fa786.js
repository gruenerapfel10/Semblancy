(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6530],{428:(e,t,n)=>{"use strict";n.d(t,{S:()=>c});var i=n(62468),o=n(66685),r=n(14882);let a="amplify-signin-with-hostedUI",s="CognitoIdentityServiceProvider";class c{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){(0,i.$y)(this.cognitoConfig);let e=d(s,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){(0,i.$y)(this.cognitoConfig);let e=d(s,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(a),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){(0,i.$y)(this.cognitoConfig);let e=d(s,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){(0,i.$y)(this.cognitoConfig);let t=d(s,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){(0,i.$y)(this.cognitoConfig);let e=d(s,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){(0,i.$y)(this.cognitoConfig);let t=d(s,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){(0,i.$y)(this.cognitoConfig);let e=d(s,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(e.inflightOAuth)==="true"}async storeOAuthInFlight(e){(0,i.$y)(this.cognitoConfig);let t=d(s,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){(0,i.$y)(this.cognitoConfig);let e=d(s,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(a),[n,o]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===n||"true"===t,preferPrivateSession:"true"===o}}async storeOAuthSignIn(e,t=!1){(0,i.$y)(this.cognitoConfig);let n=d(s,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.oauthSignIn,`${e},${t}`)}}let d=(e,t)=>(0,o.Qm)(r.f3)(e,t)},688:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var i=n(99994),o=n(50234);class r extends o.a{constructor(e={name:i.m.Unknown,message:"An unknown error has occurred.",recoverySuggestion:"This may be a bug. Please reach out to library authors."}){super(e),this.constructor=r,Object.setPrototypeOf(this,r.prototype)}}},1052:(e,t,n)=>{"use strict";n.d(t,{AR:()=>ep,ni:()=>eh,q2:()=>es,m$:()=>ec,ty:()=>er,tE:()=>ea,h5:()=>ei,Zw:()=>eo});var i,o=n(42656),r=n(96778),a=n(62468),s=n(30017),c=n(35346),d=n(65600),l=n(73140),u=n(82321),p=n(8773),h=n(23251),g=n(82500),E=n(83507),f=n(49240),m=n(87395),y=n(83578),x=n(74267);let I=e=>(0,E.A)(f.e,(0,m._)("AssociateSoftwareToken"),(0,y.T)(),{...x.C,...e});var S=n(40850),v=n(6929),w=n(21854),C=n(84986),A=n(76545),T=n(61235),R=n(41195),P=n(30525),b=n(99994);class k extends R.x{constructor(e){super(e),this.constructor=k,Object.setPrototypeOf(this,k.prototype)}}!function(e){e.PasskeyNotSupported="PasskeyNotSupported",e.PasskeyAlreadyExists="PasskeyAlreadyExists",e.InvalidPasskeyRegistrationOptions="InvalidPasskeyRegistrationOptions",e.InvalidPasskeyAuthenticationOptions="InvalidPasskeyAuthenticationOptions",e.RelyingPartyMismatch="RelyingPartyMismatch",e.PasskeyRegistrationFailed="PasskeyRegistrationFailed",e.PasskeyRetrievalFailed="PasskeyRetrievalFailed",e.PasskeyRegistrationCanceled="PasskeyRegistrationCanceled",e.PasskeyAuthenticationCanceled="PasskeyAuthenticationCanceled",e.PasskeyOperationAborted="PasskeyOperationAborted"}(i||(i={}));let N="Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.",U="User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.",D="Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.",M={[i.PasskeyNotSupported]:{message:"Passkeys may not be supported on this device.",recoverySuggestion:N},[i.InvalidPasskeyRegistrationOptions]:{message:"Invalid passkey registration options.",recoverySuggestion:D},[i.InvalidPasskeyAuthenticationOptions]:{message:"Invalid passkey authentication options.",recoverySuggestion:D},[i.PasskeyRegistrationFailed]:{message:"Device failed to create passkey.",recoverySuggestion:N},[i.PasskeyRetrievalFailed]:{message:"Device failed to retrieve passkey.",recoverySuggestion:"Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP."},[i.PasskeyAlreadyExists]:{message:"Passkey already exists in authenticator.",recoverySuggestion:"Proceed with existing passkey or try again after deleting the credential."},[i.PasskeyRegistrationCanceled]:{message:"Passkey registration ceremony has been canceled.",recoverySuggestion:U},[i.PasskeyAuthenticationCanceled]:{message:"Passkey authentication ceremony has been canceled.",recoverySuggestion:U},[i.PasskeyOperationAborted]:{message:"Passkey operation has been aborted.",recoverySuggestion:U},[i.RelyingPartyMismatch]:{message:"Relying party does not match current domain.",recoverySuggestion:"Ensure relying party identifier matches current domain."}},O=(0,P.p)(M,k),F=e=>{if(e instanceof k)return e;if(e instanceof Error&&"NotAllowedError"===e.name){let{message:t,recoverySuggestion:n}=M[i.PasskeyAuthenticationCanceled];return new k({name:i.PasskeyAuthenticationCanceled,message:t,recoverySuggestion:n,underlyingError:e})}return _(e)},_=e=>{if(e instanceof Error){if("AbortError"===e.name){let{message:t,recoverySuggestion:n}=M[i.PasskeyOperationAborted];return new k({name:i.PasskeyOperationAborted,message:t,recoverySuggestion:n,underlyingError:e})}if("SecurityError"===e.name){let{message:t,recoverySuggestion:n}=M[i.RelyingPartyMismatch];return new k({name:i.RelyingPartyMismatch,message:t,recoverySuggestion:n,underlyingError:e})}}return new k({name:b.m.Unknown,message:"An unknown error has occurred.",underlyingError:e})};var L=n(40323);let B=()=>(0,L.B)()&&window.isSecureContext&&"credentials"in navigator&&"function"==typeof window.PublicKeyCredential;var K=n(23802);let $=e=>K.Y.convert(new Uint8Array(e),{urlSafe:!0,skipPadding:!0});var V=n(74552);let z=e=>Uint8Array.from(V.m.convert(e,{urlSafe:!0}),e=>e.charCodeAt(0)).buffer,q=e=>{let t=z(e.challenge),n=(e.allowCredentials||[]).map(e=>({...e,id:z(e.id)}));return{...e,challenge:t,allowCredentials:n}},j=e=>{let t={clientDataJSON:$(e.response.clientDataJSON),authenticatorData:$(e.response.authenticatorData),signature:$(e.response.signature)};e.response.userHandle&&(t.userHandle=$(e.response.userHandle));let n={id:e.id,rawId:$(e.rawId),type:e.type,clientExtensionResults:e.getClientExtensionResults(),response:t};return e.authenticatorAttachment&&(n.authenticatorAttachment=e.authenticatorAttachment),n},H=async e=>{try{let t=B();O(t,i.PasskeyNotSupported);let n=q(e),o=await navigator.credentials.get({publicKey:n});return!function(e){O(e&&e instanceof PublicKeyCredential&&e.response instanceof AuthenticatorAssertionResponse,i.PasskeyRetrievalFailed)}(o),j(o)}catch(e){throw F(e)}};var W=n(76313);async function G(e){let t=o.H.getConfig().Auth?.Cognito;(0,a.$y)(t);let{username:n,signInSession:s,signInDetails:d,challengeName:u}=T.c$.getState();if("WEB_AUTHN"!==u||!n)throw new c.l({name:l.nC.SignInException,message:"Unable to proceed due to invalid sign in state."});let{CREDENTIAL_REQUEST_OPTIONS:p}=e;O(!!p,i.InvalidPasskeyAuthenticationOptions);let g=await H(JSON.parse(p)),E=(0,w.H)({endpointResolver:(0,S.o)({endpointOverride:t.userPoolEndpoint})}),{ChallengeName:f,ChallengeParameters:m,AuthenticationResult:y,Session:x}=await E({region:(0,v.J)(t.userPoolId),userAgentValue:(0,h.A)(r.BM.ConfirmSignIn)},{ChallengeName:"WEB_AUTHN",ChallengeResponses:{USERNAME:n,CREDENTIAL:JSON.stringify(g)},ClientId:t.userPoolClientId,Session:s});if((0,T.wr)({signInSession:x,username:n,challengeName:f,signInDetails:d}),y)return await (0,C.i)({...y,username:n,NewDeviceMetadata:await (0,W.i)({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:y.NewDeviceMetadata,accessToken:y.AccessToken}),signInDetails:d}),T.c$.dispatch({type:"RESET_STATE"}),await (0,A.Q)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};if("WEB_AUTHN"===f)throw new c.l({name:l.nC.SignInException,message:"Sequential WEB_AUTHN challenges returned from underlying service cannot be handled."});return{challengeName:f,challengeParameters:m}}var Y=n(45554),J=n(43118);n(49570);var Z=n(11719),Q=n(36919),X=n(44582),ee=n(57954),et=n(49573);let en="userAttributes.";async function ei(e,t,n,i,o){let{userPoolClientId:a,userPoolId:s,userPoolEndpoint:c}=i,d={USERNAME:e,PASSWORD:t},l=await o.getDeviceMetadata(e);l&&l.deviceKey&&(d.DEVICE_KEY=l.deviceKey);let u=(0,Z.d)({username:e,userPoolId:s,userPoolClientId:a}),p=(0,g.R)({endpointResolver:(0,S.o)({endpointOverride:c})}),E=await p({region:(0,v.J)(s),userAgentValue:(0,h.A)(r.BM.SignIn)},{AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:d,ClientMetadata:n,ClientId:a,UserContextData:u}),f=E.ChallengeParameters?.USERNAME??E.ChallengeParameters?.USER_ID_FOR_SRP??e;return((0,et.d)(f),"DEVICE_SRP_AUTH"===E.ChallengeName)?(0,X.O)({username:f,config:i,clientMetadata:n,session:E.Session,tokenOrchestrator:o}):E}async function eo(e,t,n,i,o){return(0,Y.L)({username:e,password:t,clientMetadata:n,config:i,tokenOrchestrator:o,authFlow:"USER_SRP_AUTH"})}async function er(e,t,n,i){let{userPoolClientId:o,userPoolId:a,userPoolEndpoint:s}=n,c={USERNAME:e},d=await i.getDeviceMetadata(e);d&&d.deviceKey&&(c.DEVICE_KEY=d.deviceKey);let l=(0,Z.d)({username:e,userPoolId:a,userPoolClientId:o}),u=(0,g.R)({endpointResolver:(0,S.o)({endpointOverride:s})}),p=await u({region:(0,v.J)(a),userAgentValue:(0,h.A)(r.BM.SignIn)},{AuthFlow:"CUSTOM_AUTH",AuthParameters:c,ClientMetadata:t,ClientId:o,UserContextData:l}),E=p.ChallengeParameters?.USERNAME??e;return((0,et.d)(E),"DEVICE_SRP_AUTH"===p.ChallengeName)?(0,X.O)({username:E,config:n,clientMetadata:t,session:p.Session,tokenOrchestrator:i}):p}async function ea(e,t,n,i,o){(0,a.$y)(i);let{userPoolId:s,userPoolClientId:c,userPoolEndpoint:d}=i,l=s?.split("_")[1]||"",u=await (0,J.H)(l),p={USERNAME:e,SRP_A:u.A.toString(16),CHALLENGE_NAME:"SRP_A"},E=(0,Z.d)({username:e,userPoolId:s,userPoolClientId:c}),f=(0,g.R)({endpointResolver:(0,S.o)({endpointOverride:d})}),{ChallengeParameters:m,Session:y}=await f({region:(0,v.J)(s),userAgentValue:(0,h.A)(r.BM.SignIn)},{AuthFlow:"CUSTOM_AUTH",AuthParameters:p,ClientMetadata:n,ClientId:c,UserContextData:E}),x=m?.USERNAME??e;return(0,et.d)(x),(0,ee.i)(Q.f,[t,m,n,y,u,i,o],x,o)}async function es(e){var t,n,i;let{challengeName:r,challengeParameters:d,availableChallenges:u}=e,p=o.H.getConfig().Auth?.Cognito;switch((0,a.$y)(p),r){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:d}};case"MFA_SETUP":{let{signInSession:e,username:i}=T.c$.getState(),o=el(eu(d.MFAS_CAN_SETUP))||[],r=o.filter(e=>"EMAIL"===e||"TOTP"===e),a=r.includes("TOTP"),u=r.includes("EMAIL");if(a&&u)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION",allowedMFATypes:r}};if(u)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_EMAIL_SETUP"}};if(a){let o=I({endpointResolver:(0,S.o)({endpointOverride:p.userPoolEndpoint})}),{Session:r,SecretCode:a}=await o({region:(0,v.J)(p.userPoolId)},{Session:e});return T.c$.dispatch({type:"SET_SIGN_IN_SESSION",value:r}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:(t=a,n=i,{sharedSecret:t,getSetupUri:(e,i)=>{let o=`otpauth://totp/${e}:${i??n}?secret=${t}&issuer=${e}`;return new s.o(o)}})}}}throw new c.l({name:l.nC.SignInException,message:`Cannot initiate MFA setup from available types: ${o}`})}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:(i=d.requiredAttributes)?JSON.parse(i).map(e=>e.includes(en)?e.replace(en,""):e):[]}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:el(eu(d.MFAS_CAN_CHOOSE))}};case"SMS_OTP":case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:d.CODE_DELIVERY_DELIVERY_MEDIUM,destination:d.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}};case"EMAIL_OTP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_EMAIL_CODE",codeDeliveryDetails:{deliveryMedium:d.CODE_DELIVERY_DELIVERY_MEDIUM,destination:d.CODE_DELIVERY_DESTINATION}}};case"WEB_AUTHN":{let e=await G(d);if("isSignedIn"in e&&"nextStep"in e)return e;return es(e)}case"PASSWORD":case"PASSWORD_SRP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_PASSWORD"}};case"SELECT_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION",availableChallenges:u}}}throw new c.l({name:l.nC.SignInException,message:`An error occurred during the sign in process. ${r} challengeName returned by the underlying service was not addressed.`})}function ec(e){return e===d.zh.PasswordResetRequiredException?{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}}:e===d.zh.UserNotConfirmedException?{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}:void 0}function ed(e){return"SMS_MFA"===e?"SMS":"SOFTWARE_TOKEN_MFA"===e?"TOTP":"EMAIL_OTP"===e?"EMAIL":void 0}function el(e){if(e)return e.map(ed).filter(Boolean)}function eu(e){return e?JSON.parse(e):[]}async function ep(){let e;try{e=await (0,p.H)()}catch(e){}if(e&&e.userId&&e.username)throw new c.l({name:u.z0,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}function eh(e){return T.c$.getState().username??e}},2035:(e,t,n)=>{"use strict";n.d(t,{k:()=>A});var i=n(42656),o=n(62468),r=n(69895),a=n(99643),s=n(99529),c=n(1052),d=n(56276),l=n(61235),u=n(84986),p=n(76545),h=n(11826),g=n(96778),E=n(11719),f=n(82500),m=n(40850),y=n(6929),x=n(23251),I=n(45554),S=n(49573);async function v({username:e,clientMetadata:t,config:n,tokenOrchestrator:i,preferredChallenge:o,password:s,session:c}){let{userPoolId:d,userPoolClientId:l,userPoolEndpoint:u}=n,p=(0,E.d)({username:e,userPoolId:d,userPoolClientId:l}),h={USERNAME:e};if(o){if("PASSWORD_SRP"===o)return(0,a.M)(!!s,r.P.EmptySignInPassword),(0,I.L)({username:e,password:s,clientMetadata:t,config:n,tokenOrchestrator:i,authFlow:"USER_AUTH",preferredChallenge:o});"PASSWORD"===o&&((0,a.M)(!!s,r.P.EmptySignInPassword),h.PASSWORD=s),h.PREFERRED_CHALLENGE=o}let v={AuthFlow:"USER_AUTH",AuthParameters:h,ClientMetadata:t,ClientId:l,UserContextData:p};c&&(v.Session=c);let w=(0,f.R)({endpointResolver:(0,m.o)({endpointOverride:u})}),C=await w({region:(0,y.J)(d),userAgentValue:(0,x.A)(g.BM.SignIn)},v);return(0,S.d)(e),C}var w=n(76313),C=n(19078);async function A(e){let{username:t,password:n,options:g}=e,E=i.H.getConfig().Auth?.Cognito,f={loginId:t,authFlowType:"USER_AUTH"};(0,o.$y)(E);let m=g?.clientMetadata,y=g?.preferredChallenge;(0,a.M)(!!t,r.P.EmptySignInUsername);try{let e={username:t,config:E,tokenOrchestrator:h.o,clientMetadata:m,preferredChallenge:y,password:n},i=d.z.getState();i.active&&i.username===t&&(e.session=i.session);let o=await v(e),r=(0,c.ni)(t);if((0,l.wr)({signInSession:o.Session,username:r,challengeName:o.ChallengeName,signInDetails:f}),o.AuthenticationResult)return await (0,u.i)({username:r,...o.AuthenticationResult,NewDeviceMetadata:await (0,w.i)({userPoolId:E.userPoolId,userPoolEndpoint:E.userPoolEndpoint,newDeviceMetadata:o.AuthenticationResult.NewDeviceMetadata,accessToken:o.AuthenticationResult.AccessToken}),signInDetails:f}),(0,l.jN)(),await (0,p.Q)(),(0,C.xO)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,c.q2)({challengeName:o.ChallengeName,challengeParameters:o.ChallengeParameters,availableChallenges:"AvailableChallenges"in o?o.AvailableChallenges:void 0})}catch(t){(0,l.jN)(),(0,C.xO)(),(0,s.e)(t);let e=(0,c.m$)(t.name);if(e)return e;throw t}}},2184:(e,t,n)=>{"use strict";n.d(t,{T:()=>v});var i=n(42656),o=n(96778);n(180),n(31668);var r=n(96483),a=n(70207),s=n(63159),c=n(54830),d=n(66054),l=n(22829),u=n(30017),p=n(83507),h=n(99708);n(42993),n(45755);var g=n(96423),E=n(29486),f=n(20875),m=n(75015);let y=async e=>{if(!(e.statusCode>=300))return{...(0,g.Tj)(e.headers,{DeleteMarker:["x-amz-delete-marker",g.OI],VersionId:"x-amz-version-id",RequestCharged:"x-amz-request-charged"}),$metadata:(0,l.j)(e)};{let t=await (0,m.VY)(e);throw(0,g.Pu)(t,e.statusCode)}},x=(0,p.A)(h.o,(e,t)=>{let n=new u.o(t.url.toString());return(0,E.Nt)(!!e.Key,"Key"),n.pathname=(0,E.DB)(n,e.Key),(0,f.L)({bucketName:e.Bucket,key:e.Key,objectURL:n}),{method:"DELETE",headers:(0,E.Sl)({"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),url:n}},y,{...m.sb,responseType:"text"});var I=n(64469);let S=async(e,t)=>{let n;let{s3Config:i,keyPrefix:l,bucket:u,identityId:p}=await (0,r.a)(e,t),{inputType:h,objectKey:g}=(0,c.d)(t,p);return(0,s.L)(t.options?.expectedBucketOwner),h===d.nf?(n=`${l}${g}`,a.v.debug(`remove "${g}" from "${n}".`)):(n=g,a.v.debug(`removing object in path "${n}"`)),await x({...i,userAgentValue:(0,I.B)(o.sZ.Remove)},{Bucket:u,Key:n,ExpectedBucketOwner:t.options?.expectedBucketOwner}),h===d.nf?{key:g}:{path:g}};function v(e){return S(i.H,e)}},4274:(e,t,n)=>{"use strict";var i;n.d(t,{q:()=>i,u:()=>o}),function(e){e.NoCredentials="NoCredentials",e.NoIdentityId="NoIdentityId",e.NoKey="NoKey",e.NoSourceKey="NoSourceKey",e.NoDestinationKey="NoDestinationKey",e.NoSourcePath="NoSourcePath",e.NoDestinationPath="NoDestinationPath",e.NoBucket="NoBucket",e.NoRegion="NoRegion",e.InvalidStorageBucket="InvalidStorageBucket",e.InvalidCopyOperationStorageBucket="InvalidCopyOperationStorageBucket",e.InvalidStorageOperationPrefixInput="InvalidStorageOperationPrefixInput",e.InvalidStorageOperationInput="InvalidStorageOperationInput",e.InvalidAWSAccountID="InvalidAWSAccountID",e.InvalidStoragePathInput="InvalidStoragePathInput",e.InvalidUploadSource="InvalidUploadSource",e.ObjectIsTooLarge="ObjectIsTooLarge",e.UrlExpirationMaxLimitExceed="UrlExpirationMaxLimitExceed",e.InvalidLocationCredentialsCacheSize="InvalidLocationCredentialsCacheSize",e.LocationCredentialsStoreDestroyed="LocationCredentialsStoreDestroyed",e.InvalidS3Uri="InvalidS3Uri",e.InvalidCustomEndpoint="InvalidCustomEndpoint",e.ForcePathStyleEndpointNotSupported="ForcePathStyleEndpointNotSupported",e.DnsIncompatibleBucketName="DnsIncompatibleBucketName"}(i||(i={}));let o={[i.NoCredentials]:{message:"Credentials should not be empty."},[i.NoIdentityId]:{message:"Missing identity ID when accessing objects in protected or private access level."},[i.NoKey]:{message:"Missing key in api call."},[i.NoSourceKey]:{message:"Missing source key in copy api call."},[i.NoDestinationKey]:{message:"Missing destination key in copy api call."},[i.NoSourcePath]:{message:"Missing source path in copy api call."},[i.NoDestinationPath]:{message:"Missing destination path in copy api call."},[i.NoBucket]:{message:"Missing bucket name while accessing object."},[i.NoRegion]:{message:"Missing region while accessing object."},[i.UrlExpirationMaxLimitExceed]:{message:"Url Expiration can not be greater than 7 Days."},[i.ObjectIsTooLarge]:{message:"Object size cannot not be greater than 5TB."},[i.InvalidUploadSource]:{message:"Upload source type can only be a `Blob`, `File`, `ArrayBuffer`, or `string`."},[i.InvalidStorageOperationInput]:{message:"Path or key parameter must be specified in the input. Both can not be specified at the same time."},[i.InvalidAWSAccountID]:{message:"Invalid AWS account ID was provided."},[i.InvalidStorageOperationPrefixInput]:{message:"Both path and prefix can not be specified at the same time."},[i.InvalidStoragePathInput]:{message:"Input `path` does not allow a leading slash (/)."},[i.InvalidLocationCredentialsCacheSize]:{message:"locationCredentialsCacheSize must be a positive integer."},[i.LocationCredentialsStoreDestroyed]:{message:"Location-specific credentials store has been destroyed."},[i.InvalidS3Uri]:{message:"Invalid S3 URI."},[i.InvalidStorageBucket]:{message:"Unable to lookup bucket from provided name in Amplify configuration."},[i.InvalidCopyOperationStorageBucket]:{message:"Missing bucket option in either source or destination."},[i.InvalidCustomEndpoint]:{message:"Invalid S3 custom endpoint."},[i.ForcePathStyleEndpointNotSupported]:{message:"Path style URLs are not supported with S3 Transfer Acceleration."},[i.DnsIncompatibleBucketName]:{message:"The bucket name isn't DNS compatible."}}},8773:(e,t,n)=>{"use strict";n.d(t,{H:()=>s});var i=n(42656),o=n(62468),r=n(14882);let a=async e=>{var t;let n=e.getConfig().Auth?.Cognito;(0,o.$y)(n);let i=await e.Auth.getTokens({forceRefresh:!1});(0,r.H0)(i);let{"cognito:username":a,sub:s}=i.idToken?.payload??{},c={username:a,userId:s},d=(t=i,t?.signInDetails);return d&&(c.signInDetails=d),c},s=async()=>a(i.H)},11826:(e,t,n)=>{"use strict";n.d(t,{Q:()=>v,o:()=>w});var i=n(15644),o=n(62468),r=n(6929),a=n(14882),s=n(35346),c=n(82500),d=n(40850),l=n(11719);let u=(e=>{let t;return async(...n)=>t||(t=new Promise((i,o)=>{e(...n).then(e=>{i(e)}).catch(e=>{o(e)}).finally(()=>{t=void 0})}))})(async({tokens:e,authConfig:t,username:n})=>{(0,o.$y)(t?.Cognito);let{userPoolId:i,userPoolClientId:u,userPoolEndpoint:p}=t.Cognito,h=(0,r.J)(i);(0,a.X4)(e);let g=e.refreshToken,E={REFRESH_TOKEN:g};e.deviceMetadata?.deviceKey&&(E.DEVICE_KEY=e.deviceMetadata.deviceKey);let f=(0,l.d)({username:n,userPoolId:i,userPoolClientId:u}),m=(0,c.R)({endpointResolver:(0,d.o)({endpointOverride:p})}),{AuthenticationResult:y}=await m({region:h},{ClientId:u,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:E,UserContextData:f}),x=(0,o.Cq)(y?.AccessToken??""),I=y?.IdToken?(0,o.Cq)(y.IdToken):void 0,{iat:S}=x.payload;if(!S)throw new s.l({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:x,idToken:I,clockDrift:1e3*S-new Date().getTime(),refreshToken:g,username:n}});var p=n(66685),h=n(43425),g=n(40323);function E({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}var f=n(99994),m=n(99529),y=n(39421),x=n(14219);class I{constructor(){this.waitForInflightOAuth=(0,g.B)()?async()=>await y.f.loadOAuthInFlight()?(this.inflightPromise||(this.inflightPromise=new Promise((e,t)=>{(0,x.I)(e)})),this.inflightPromise):void 0:async()=>{}}setAuthConfig(e){y.f.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new s.l({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new s.l({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{(0,o.$y)(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();let n=await this.getTokenStore().getLastAuthUser();if(null===t)return null;let i=!!t?.idToken&&E({expiresAt:(t.idToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0}),r=E({expiresAt:(t.accessToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0});return(e?.forceRefresh||i||r)&&null===(t=await this.refreshTokens({tokens:t,username:n}))?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{let{signInDetails:n}=e,i=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return i.signInDetails=n,await this.setTokens({tokens:i}),h.YZ.dispatch("auth",{event:"tokenRefresh"},"Auth",h.U9),i}catch(e){return this.handleErrors(e)}}handleErrors(e){if((0,m.e)(e),e.name!==f.m.NetworkError&&this.clearTokens(),h.YZ.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",h.U9),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class S{constructor(){this.authTokenStore=new p.Uv,this.authTokenStore.setKeyValueStorage(i.ZL),this.tokenOrchestrator=new I,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(u)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}}let v=new S,{tokenOrchestrator:w}=v},14219:(e,t,n)=>{"use strict";n.d(t,{I:()=>o,i:()=>r});let i=[],o=e=>{i.push(e)},r=()=>{for(;i.length;)i.pop()?.()}},14882:(e,t,n)=>{"use strict";n.d(t,{H0:()=>r,OW:()=>a,O_:()=>l,X4:()=>d,f3:()=>u});var i=n(35346),o=n(82321);function r(e){if(!e||!e.accessToken)throw new i.l({name:o.zz,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function a(e){if(!e||!e.idToken)throw new i.l({name:o.zz,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}let s=new i.l({name:o.Cs,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),c=new i.l({name:o.zz,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function d(e){var t,n;if(p(t=e)&&!t?.refreshToken)throw s;if(!(p(n=e)&&n?.refreshToken))throw c}function l(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new i.l({name:o.kM,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}let u={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function p(e){return e?.accessToken||e?.idToken}},15644:(e,t,n)=>{"use strict";n.d(t,{ZL:()=>f,pR:()=>m});var i=n(99994),o=n(41195);class r extends o.x{constructor(){super({name:i.m.PlatformNotSupported,message:"Function not supported on current platform"})}}class a{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new r;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new r;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new r;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new r;this.storage.clear()}}var s=n(87410);class c{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}let d=new s.C("CoreStorageUtils"),l=()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){d.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new c},u=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw Error("sessionStorage is not defined")}catch(e){return d.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new c}};class p extends a{constructor(){super(l())}}class h extends a{constructor(){super(u())}}class g{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new r;return this._storage}setItem(e,t){this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}}class E extends g{constructor(){super(u())}}let f=new p;new h;let m=new E;new a(new c)},16119:(e,t,n)=>{"use strict";n.d(t,{C:()=>h});var i=n(22829),o=n(30017),r=n(83507),a=n(99708);n(42993),n(45755);var s=n(96423),c=n(29486),d=n(20875),l=n(75015);let u=async(e,t)=>{let n=new o.o(t.url.toString());return(0,c.Nt)(!!e.Key,"Key"),n.pathname=(0,c.DB)(n,e.Key),(0,d.L)({bucketName:e.Bucket,key:e.Key,objectURL:n}),{method:"HEAD",headers:(0,c.Sl)({"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),url:n}},p=async e=>{if(e.statusCode>=300){let t=await (0,l.VY)(e);throw(0,s.Pu)(t,e.statusCode)}{let t={...(0,s.Tj)(e.headers,{ContentLength:["content-length",s.vv],ContentType:"content-type",ETag:"etag",LastModified:["last-modified",s.El],VersionId:"x-amz-version-id"}),Metadata:(0,s.nl)(e.headers)};return{$metadata:(0,i.j)(e),...t}}},h=(0,r.A)(a.o,u,p,{...l.sb,responseType:"text"})},19078:(e,t,n)=>{"use strict";n.d(t,{K$:()=>o,xO:()=>r});var i=n(56276);function o(e){}function r(e=!0){i.z.dispatch({type:"RESET"})}n(35346),n(82321)},19727:(e,t,n)=>{"use strict";n.d(t,{E:()=>W});var i=n(42656);function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var r=function e(t,n){function i(e,i,r){if("undefined"!=typeof document){"number"==typeof(r=o({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in r){if(r[s])a+="; "+s,!0!==r[s]&&(a+="="+r[s].split(";")[0])}return document.cookie=e+"="+t.write(i,e)+a}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},o=0;o<n.length;o++){var r=n[o].split("="),a=r.slice(1).join("=");try{var s=decodeURIComponent(r[0]);if(i[s]=t.read(a,s),e===s)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",o({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,o({},this.attributes,t))},withConverter:function(t){return e(o({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class a{constructor(e={}){let{path:t,domain:n,expires:i,sameSite:o,secure:r}=e;if(this.domain=n,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?i:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||r,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!o||!["strict","lax","none"].includes(o))throw Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===o&&!this.secure)throw Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=o}}async setItem(e,t){r.set(e,t,this.getData())}async getItem(e){return r.get(e)??null}async removeItem(e){r.remove(e,this.getData())}async clear(){let e=Object.keys(r.get()).map(e=>this.removeItem(e));await Promise.all(e)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}var s=n(15644),c=n(60775),d=n(11826),l=n(87410),u=n(62468),p=n(66685);let h={identityId:"identityId"},g=new l.C("DefaultIdentityIdStore");class E{setAuthConfig(e){(0,u.Eh)(e.Cognito),this.authConfig=e,this._authKeys=f("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){(0,u.Eh)(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let e=await this.keyValueStorage.getItem(this._authKeys.identityId);if(e)return this._hasGuestIdentityId=!0,{id:e,type:"guest"};return null}}catch(e){return g.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){(0,u.Eh)(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}let f=(e,t)=>(0,p.Qm)(h)(`com.amplify.${e}`,t);n(49570),n(88346);var m=n(22829),y=n(27814),x=n(83507),I=n(56819),S=n(92073),v=n(29563),w=n(76021),C=n(30017),A=n(72877),T=n(77246),R=n(31085);let P=(0,A.q)(S.F,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),b={service:"cognito-identity",endpointResolver:({region:e})=>({url:new C.o(`https://cognito-identity.${e}.${(0,I.R)(e)}`)}),retryDecider:(0,w.D)(y.F),computeDelay:v.y,userAgentValue:(0,T.fE)(),cache:"no-store"};(0,R.e9)(()=>{b.userAgentValue=(0,T.fE)()});let k=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),N=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),U=async e=>{if(e.statusCode>=300)throw await (0,y.F)(e);{let t=await (0,y.Y)(e);return{IdentityId:t.IdentityId,Credentials:D(t.Credentials),$metadata:(0,m.j)(e)}}},D=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:i}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:i&&new Date(1e3*i)}),M=(0,x.A)(P,(e,t)=>N(t,k("GetCredentialsForIdentity"),JSON.stringify(e)),U,b);var O=n(35346),F=n(6929),_=n(14882);let L=async e=>{if(!(e.statusCode>=300))return{IdentityId:(await (0,y.Y)(e)).IdentityId,$metadata:(0,m.j)(e)};throw await (0,y.F)(e)},B=(0,x.A)(P,(e,t)=>N(t,k("GetId"),JSON.stringify(e)),L,b);function K(e){let t=(0,u.Cq)(e).payload.iss,n={};if(!t)throw new O.l({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return n[t.replace(/(^\w+:|^)\/\//,"")]=e,n}let $=new l.C("CognitoIdentityIdProvider");async function V({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let i=await n.loadIdentityId();if(e){if(i&&"primary"===i.type)return i.id;{let n=e.idToken?K(e.idToken.toString()):{},o=await z(n,t);i&&i.id===o&&$.debug(`The guest identity ${i.id} has become the primary identity.`),i={id:o,type:"primary"}}}else{if(i&&"guest"===i.type)return i.id;i={id:await z({},t),type:"guest"}}return n.storeIdentityId(i),i.id}async function z(e,t){let n=t?.identityPoolId,i=(0,F.C)(n),o=(await B({region:i},{IdentityPoolId:n,Logins:e})).IdentityId;if(!o)throw new O.l({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return o}let q=new l.C("CognitoCredentialsProvider");class j{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){q.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){q.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){let t=e.authenticated,{tokens:n}=e,{authConfig:i}=e;try{(0,u.Eh)(i?.Cognito)}catch{return}if(!t&&!i.Cognito.allowGuestAccess)return;let{forceRefresh:o}=e,r=this.hasTokenChanged(n),a=await V({tokens:n,authConfig:i.Cognito,identityIdStore:this._identityIdStore});return((o||r)&&this.clearCredentials(),t)?((0,_.OW)(n),this.credsForOIDCTokens(i.Cognito,n,a)):this.getGuestCredentials(a,i.Cognito)}async getGuestCredentials(e,t){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return q.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let n=(0,F.C)(t.identityPoolId),i=await M({region:n},{IdentityId:e});if(i.Credentials&&i.Credentials.AccessKeyId&&i.Credentials.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let t={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:e},n=i.IdentityId;return n&&(t.identityId=n,this._identityIdStore.storeIdentityId({id:n,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new O.l({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,n){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return q.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let i=t.idToken?K(t.idToken.toString()):{},o=(0,F.C)(e.identityPoolId),r=await M({region:o},{IdentityId:n,Logins:i});if(r.Credentials&&r.Credentials.AccessKeyId&&r.Credentials.SecretKey){let e={credentials:{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration},identityId:n};this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},this._nextCredentialsRefresh=new Date().getTime()+3e6;let i=r.IdentityId;return i&&(e.identityId=i,this._identityIdStore.storeIdentityId({id:i,type:"primary"})),e}throw new O.l({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}let H=new j(new E(s.ZL)),W={configure(e,t){let n=(0,c.M)(e);if(!n.Auth||t?.Auth){i.H.configure(n,t);return}if(!i.H.libraryOptions.Auth){d.Q.setAuthConfig(n.Auth),d.Q.setKeyValueStorage(t?.ssr?new a({sameSite:"lax"}):s.ZL),i.H.configure(n,{...t,Auth:{tokenProvider:d.Q,credentialsProvider:H}});return}if(t){void 0!==t.ssr&&d.Q.setKeyValueStorage(t.ssr?new a({sameSite:"lax"}):s.ZL),i.H.configure(n,{Auth:i.H.libraryOptions.Auth,...t});return}i.H.configure(n)},getConfig:()=>i.H.getConfig()}},20875:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});var i=n(44867),o=n(688);function r({bucketName:e,key:t,objectURL:n}){if(!e||!t||!n)throw new o.c;let r=e.includes("."),a=(0,i.$)(e),s=t.split("/").map(i.$).join("/"),c=n.pathname===`/${a}/${s}`,d=n.hostname.startsWith(`${a}.`)&&n.pathname===`/${s}`;if(!(c||!r&&d))throw new o.c}},21550:(e,t,n)=>{"use strict";n.d(t,{$:()=>r});var i=n(42656);let o=(e,t)=>e.Auth.fetchAuthSession(t),r=e=>o(i.H,e)},21854:(e,t,n)=>{"use strict";n.d(t,{H:()=>c});var i=n(83507),o=n(49240),r=n(87395),a=n(83578),s=n(74267);let c=e=>(0,i.A)(o.e,(0,r._)("RespondToAuthChallenge"),(0,a.T)(),{...s.C,...e})},23752:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});var i=n(75318),o=n(61508);let r=e=>null==e?i.fM:a(e)?(0,o.h)(null,e):i.z8,a=e=>"string"==typeof e||ArrayBuffer.isView(e)||s(e),s=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},23802:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var i=n(95690);let o={convert(e,t={urlSafe:!1,skipPadding:!1}){let n="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),o=(0,i.xA)()(n);return t.urlSafe&&(o=o.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(o=o.replace(/=/g,"")),o}}},26432:(e,t,n)=>{"use strict";n.d(t,{C:()=>eL});var i=n(15644);n(19212),n(71660);var o=n(88320),r=n(4274),a=n(66054),s=n(36696),c=n(70207);let d=({job:e,onCancel:t})=>{let n;let i={cancel:e=>{let{state:o}=i;if("CANCELED"===o||"ERROR"===o||"SUCCESS"===o){c.v.debug(`This task cannot be canceled. State: ${o}`);return}i.state="CANCELED",t(n=e)},state:"IN_PROGRESS"},o=(async()=>{try{let t=await e();return i.state="SUCCESS",t}catch(e){throw(0,s.n)(e)&&(i.state="CANCELED",e.message=n??e.message),i.state="ERROR",e}})();return Object.assign(i,{result:o})},l=({job:e,onCancel:t,onResume:n,onPause:i,isMultipartUpload:o})=>{let r=Object.assign(d({job:e,onCancel:t}),{pause:()=>{let{state:e}=r;if(!o||"IN_PROGRESS"!==e){c.v.debug(`This task cannot be paused. State: ${e}`);return}r.state="PAUSED",i?.()},resume:()=>{let{state:e}=r;if(!o||"PAUSED"!==e){c.v.debug(`This task cannot be resumed. State: ${e}`);return}r.state="IN_PROGRESS",n?.()}});return r},u=e=>null==e?0:"string"==typeof e?new Blob([e]).size:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0;var p=n(42656),h=n(96778),g=n(52473);let E=[0x67452301,0xefcdab89,0x98badcfe,0x10325476];class f{constructor(){this.reset()}update(e){var t,n;if("string"==typeof(t=e)?0===t.length:0===t.byteLength)return;if(this.finished)throw Error("Attempted to update an already finished hash.");let i="string"==typeof(n=e)?(0,g.a)(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n),o=0,{byteLength:r}=i;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,i[o++]),r--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){let{buffer:e,bufferLength:t,bytesHashed:n}=this,i=8*n;if(e.setUint8(this.bufferLength++,128),t%64>=56){for(let t=this.bufferLength;t<64;t++)e.setUint8(t,0);this.hashBuffer(),this.bufferLength=0}for(let t=this.bufferLength;t<56;t++)e.setUint8(t,0);e.setUint32(56,i>>>0,!0),e.setUint32(60,Math.floor(i/0x100000000),!0),this.hashBuffer(),this.finished=!0}let e=new DataView(new ArrayBuffer(16));for(let t=0;t<4;t++)e.setUint32(4*t,this.state[t],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){let{buffer:e,state:t}=this,n=t[0],i=t[1],o=t[2],r=t[3];n=y(n,i,o,r,e.getUint32(0,!0),7,0xd76aa478),r=y(r,n,i,o,e.getUint32(4,!0),12,0xe8c7b756),o=y(o,r,n,i,e.getUint32(8,!0),17,0x242070db),i=y(i,o,r,n,e.getUint32(12,!0),22,0xc1bdceee),n=y(n,i,o,r,e.getUint32(16,!0),7,0xf57c0faf),r=y(r,n,i,o,e.getUint32(20,!0),12,0x4787c62a),o=y(o,r,n,i,e.getUint32(24,!0),17,0xa8304613),i=y(i,o,r,n,e.getUint32(28,!0),22,0xfd469501),n=y(n,i,o,r,e.getUint32(32,!0),7,0x698098d8),r=y(r,n,i,o,e.getUint32(36,!0),12,0x8b44f7af),o=y(o,r,n,i,e.getUint32(40,!0),17,0xffff5bb1),i=y(i,o,r,n,e.getUint32(44,!0),22,0x895cd7be),n=y(n,i,o,r,e.getUint32(48,!0),7,0x6b901122),r=y(r,n,i,o,e.getUint32(52,!0),12,0xfd987193),o=y(o,r,n,i,e.getUint32(56,!0),17,0xa679438e),i=y(i,o,r,n,e.getUint32(60,!0),22,0x49b40821),n=x(n,i,o,r,e.getUint32(4,!0),5,0xf61e2562),r=x(r,n,i,o,e.getUint32(24,!0),9,0xc040b340),o=x(o,r,n,i,e.getUint32(44,!0),14,0x265e5a51),i=x(i,o,r,n,e.getUint32(0,!0),20,0xe9b6c7aa),n=x(n,i,o,r,e.getUint32(20,!0),5,0xd62f105d),r=x(r,n,i,o,e.getUint32(40,!0),9,0x2441453),o=x(o,r,n,i,e.getUint32(60,!0),14,0xd8a1e681),i=x(i,o,r,n,e.getUint32(16,!0),20,0xe7d3fbc8),n=x(n,i,o,r,e.getUint32(36,!0),5,0x21e1cde6),r=x(r,n,i,o,e.getUint32(56,!0),9,0xc33707d6),o=x(o,r,n,i,e.getUint32(12,!0),14,0xf4d50d87),i=x(i,o,r,n,e.getUint32(32,!0),20,0x455a14ed),n=x(n,i,o,r,e.getUint32(52,!0),5,0xa9e3e905),r=x(r,n,i,o,e.getUint32(8,!0),9,0xfcefa3f8),o=x(o,r,n,i,e.getUint32(28,!0),14,0x676f02d9),i=x(i,o,r,n,e.getUint32(48,!0),20,0x8d2a4c8a),n=I(n,i,o,r,e.getUint32(20,!0),4,0xfffa3942),r=I(r,n,i,o,e.getUint32(32,!0),11,0x8771f681),o=I(o,r,n,i,e.getUint32(44,!0),16,0x6d9d6122),i=I(i,o,r,n,e.getUint32(56,!0),23,0xfde5380c),n=I(n,i,o,r,e.getUint32(4,!0),4,0xa4beea44),r=I(r,n,i,o,e.getUint32(16,!0),11,0x4bdecfa9),o=I(o,r,n,i,e.getUint32(28,!0),16,0xf6bb4b60),i=I(i,o,r,n,e.getUint32(40,!0),23,0xbebfbc70),n=I(n,i,o,r,e.getUint32(52,!0),4,0x289b7ec6),r=I(r,n,i,o,e.getUint32(0,!0),11,0xeaa127fa),o=I(o,r,n,i,e.getUint32(12,!0),16,0xd4ef3085),i=I(i,o,r,n,e.getUint32(24,!0),23,0x4881d05),n=I(n,i,o,r,e.getUint32(36,!0),4,0xd9d4d039),r=I(r,n,i,o,e.getUint32(48,!0),11,0xe6db99e5),o=I(o,r,n,i,e.getUint32(60,!0),16,0x1fa27cf8),i=I(i,o,r,n,e.getUint32(8,!0),23,0xc4ac5665),n=S(n,i,o,r,e.getUint32(0,!0),6,0xf4292244),r=S(r,n,i,o,e.getUint32(28,!0),10,0x432aff97),o=S(o,r,n,i,e.getUint32(56,!0),15,0xab9423a7),i=S(i,o,r,n,e.getUint32(20,!0),21,0xfc93a039),n=S(n,i,o,r,e.getUint32(48,!0),6,0x655b59c3),r=S(r,n,i,o,e.getUint32(12,!0),10,0x8f0ccc92),o=S(o,r,n,i,e.getUint32(40,!0),15,0xffeff47d),i=S(i,o,r,n,e.getUint32(4,!0),21,0x85845dd1),n=S(n,i,o,r,e.getUint32(32,!0),6,0x6fa87e4f),r=S(r,n,i,o,e.getUint32(60,!0),10,0xfe2ce6e0),o=S(o,r,n,i,e.getUint32(24,!0),15,0xa3014314),i=S(i,o,r,n,e.getUint32(52,!0),21,0x4e0811a1),n=S(n,i,o,r,e.getUint32(16,!0),6,0xf7537e82),r=S(r,n,i,o,e.getUint32(44,!0),10,0xbd3af235),o=S(o,r,n,i,e.getUint32(8,!0),15,0x2ad7d2bb),i=S(i,o,r,n,e.getUint32(36,!0),21,0xeb86d391),t[0]=n+t[0]&0xffffffff,t[1]=i+t[1]&0xffffffff,t[2]=o+t[2]&0xffffffff,t[3]=r+t[3]&0xffffffff}reset(){this.state=Uint32Array.from(E),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function m(e,t,n,i,o,r){return((t=(t+e&0xffffffff)+(i+r&0xffffffff)&0xffffffff)<<o|t>>>32-o)+n&0xffffffff}function y(e,t,n,i,o,r,a){return m(t&n|~t&i,e,t,o,r,a)}function x(e,t,n,i,o,r,a){return m(t&i|n&~i,e,t,o,r,a)}function I(e,t,n,i,o,r,a){return m(t^n^i,e,t,o,r,a)}function S(e,t,n,i,o,r,a){return m(n^(t|~i),e,t,o,r,a)}function v(e){return btoa(Array.from(e,e=>String.fromCodePoint(e)).join(""))}function w(e){return"string"==typeof e?v(new TextEncoder().encode(e)):v(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}n(67926);let C=e=>new Promise((t,n)=>{let i=new FileReader;i.onload=()=>{t(i.result)},i.onabort=()=>{n(Error("Read aborted"))},i.onerror=()=>{n(i.error)},i.readAsArrayBuffer(e)}),A=async e=>{let t=new f,n=e instanceof Blob?await C(e):e;return t.update(n),w(await t.digest())};var T=n(96483),R=n(63159),P=n(54830),b=n(22829),k=n(30017),N=n(83507),U=n(99708);n(42993),n(45755);var D=n(96423),M=n(29486),O=n(20875),F=n(75015);let _=async(e,t)=>{let n={...await (0,M.qH)({...e,ContentType:e.ContentType??"application/octet-stream"}),...(0,M.Sl)({"content-md5":e.ContentMD5,"x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"If-None-Match":e.IfNoneMatch})},i=new k.o(t.url.toString());return(0,M.Nt)(!!e.Key,"Key"),i.pathname=(0,M.DB)(i,e.Key),(0,O.L)({bucketName:e.Bucket,key:e.Key,objectURL:i}),{method:"PUT",headers:n,url:i,body:e.Body}},L=async e=>{if(!(e.statusCode>=300))return{...(0,D.Tj)(e.headers,{ETag:"etag",VersionId:"x-amz-version-id"}),$metadata:(0,b.j)(e)};{let t=await (0,F.VY)(e);throw(0,D.Pu)(t,e.statusCode)}},B=(0,N.A)(U.o,_,L,{...F.sb,responseType:"text"});var K=n(64469),$=n(46798);let V=e=>new Uint8Array((e.match(/\w{2}/g)??[]).map(e=>parseInt(e,16))),z=e=>V(e).buffer,q=e=>w(V(e)),j=async(e,t=0)=>{let n=t;if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){let t;t=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);let i=0;for(;i<t.length;){let e=Math.min(i+1048576,t.length),o=t.slice(i,e);n=$.buf(o,n)>>>0,i=e}}else{let t;t=e instanceof Blob?e:new Blob([e]);let i=0;for(;i<t.size;){let e=Math.min(i+1048576,t.size),o=t.slice(i,e),r=new Uint8Array(await C(o));n=$.buf(r,n)>>>0,i=e}}let i=n.toString(16).padStart(8,"0");return{checksumArrayBuffer:z(i),checksum:q(i),seed:n}};var H=n(69246);let W=(e,t,n)=>async()=>{let{options:i,data:o}=e,{bucket:r,keyPrefix:s,s3Config:c,isObjectLockEnabled:d,identityId:l}=await (0,T.a)(p.H,e),{inputType:u,objectKey:g}=(0,P.d)(e,l);(0,R.L)(i?.expectedBucketOwner);let E=u===a.nf?s+g:g,{contentDisposition:f,contentEncoding:m,contentType:y="application/octet-stream",preventOverwrite:x,metadata:I,checksumAlgorithm:S,onProgress:v,expectedBucketOwner:w}=i??{},C=S===a.aC?await j(o):void 0,b=!C&&d?await A(o):void 0,{ETag:k,VersionId:N}=await B({...c,abortSignal:t,onUploadProgress:v,userAgentValue:(0,K.B)(h.sZ.UploadData)},{Bucket:r,Key:E,Body:o,ContentType:y,ContentDisposition:(0,H.q)(f),ContentEncoding:m,Metadata:I,ContentMD5:b,ChecksumCRC32:C?.checksum,ExpectedBucketOwner:w,IfNoneMatch:x?"*":void 0}),U={eTag:k,versionId:N,contentType:y,metadata:I,size:n};return u===a.nf?{key:g,...U}:{path:g,...U}};n(30841),n(27843);var G=n(50234),Y=n(80530),J=n(688),Z=n(93455);n(90670);let Q=e=>null!=e&&"object"==typeof e&&!Array.isArray(e),X=(e,t)=>{if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return!1;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,n)=>X(e,t[n]));if(!Q(e)||!Q(t))return e===t;let n=Object.keys(e),i=Object.keys(t);return n.length===i.length&&n.every(n=>i.includes(n)&&X(e[n],t[n]))},ee="Invalid parameter for CompleteMultipartUpload API",et=async(e,t)=>{let n={"content-type":"application/xml",...(0,M.Sl)({"x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,"If-None-Match":e.IfNoneMatch})},i=new k.o(t.url.toString());(0,M.Nt)(!!e.Key,"Key"),i.pathname=(0,M.DB)(i,e.Key),(0,M.Nt)(!!e.UploadId,"UploadId"),i.search=new k.g({uploadId:e.UploadId}).toString(),(0,M.Nt)(!!e.MultipartUpload,"MultipartUpload"),(0,O.L)({bucketName:e.Bucket,key:e.Key,objectURL:i});let o=en(e.MultipartUpload);return!function(e,t){if(!e.Parts)throw new J.c;let n=Z.K.parse(t);if(!X(e,(0,D.Tj)(n,{Parts:["Part",e=>(0,D.y_)(e,D.OO)]})))throw new J.c}(e.MultipartUpload,o),{method:"POST",headers:n,url:i,body:'<?xml version="1.0" encoding="UTF-8"?>'+o}},en=e=>{if(!e.Parts?.length)throw Error(`${ee}: ${JSON.stringify(e)}`);return`<CompleteMultipartUpload xmlns="http://s3.amazonaws.com/doc/2006-03-01/">${e.Parts.map(ei).join("")}</CompleteMultipartUpload>`},ei=e=>{if(null==e.PartNumber)throw Error(`${ee}: ${JSON.stringify(e)}`);if(!e.ETag)throw Error(`ETag missing from multipart upload: ${JSON.stringify(e)}. Please ensure S3 bucket CORS configuration includes ETag as part of its \`ExposeHeaders\` element`);let t=`<ETag>${e.ETag}</ETag>`,n=`<PartNumber>${e.PartNumber}</PartNumber>`,i=e.ChecksumCRC32?`<ChecksumCRC32>${e.ChecksumCRC32}</ChecksumCRC32>`:"";return`<Part>${t}${n}${i}</Part>`},eo=async e=>{let t=await (0,Y.t)(e);if(void 0!==t.Code&&void 0!==t.Message){let t=await (0,F.VY)({...e,statusCode:500});throw(0,D.Pu)(t,e.statusCode)}return t},er=async e=>{if(e.statusCode>=300){let t=await (0,F.VY)(e);throw(0,D.Pu)(t,e.statusCode)}{let t=await eo(e),n=(0,D.Tj)(t,{ETag:"ETag",Key:"Key",Location:"Location"});return{$metadata:(0,b.j)(e),...n}}},ea=async(e,t,n)=>{if(!e)return{retryable:!1};if(200===e.statusCode){if(!e.body)return{retryable:!0};let t=await (0,Y.t)(e);return void 0!==t.Code&&void 0!==t.Message?{retryable:!0}:{retryable:!1}}return(0,F.TZ)(e,t,n)},es=(0,N.A)(U.o,et,er,{...F.sb,responseType:"text",retryDecider:ea}),ec=async e=>{if(!(e.statusCode>=300))return{$metadata:(0,b.j)(e)};{let t=await (0,F.VY)(e);throw(0,D.Pu)(t,e.statusCode)}},ed=(0,N.A)(U.o,(e,t)=>{let n=new k.o(t.url.toString());return(0,M.Nt)(!!e.Key,"Key"),n.pathname=(0,M.DB)(n,e.Key),(0,M.Nt)(!!e.UploadId,"UploadId"),n.search=new k.g({uploadId:e.UploadId}).toString(),(0,O.L)({bucketName:e.Bucket,key:e.Key,objectURL:n}),{method:"DELETE",headers:{...(0,M.Sl)({"x-amz-expected-bucket-owner":e.ExpectedBucketOwner})},url:n}},ec,{...F.sb,responseType:"text"});var el=n(16119);let eu=async(e,t)=>{let n={...(0,M.Sl)({"x-amz-checksum-crc32":e.ChecksumCRC32,"content-md5":e.ContentMD5,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),"content-type":"application/octet-stream"},i=new k.o(t.url.toString());return(0,M.Nt)(!!e.Key,"Key"),i.pathname=(0,M.DB)(i,e.Key),(0,M.Nt)(!!e.PartNumber,"PartNumber"),(0,M.Nt)(!!e.UploadId,"UploadId"),i.search=new k.g({partNumber:e.PartNumber+"",uploadId:e.UploadId}).toString(),(0,O.L)({bucketName:e.Bucket,key:e.Key,objectURL:i}),{method:"PUT",headers:n,url:i,body:e.Body}},ep=async e=>{if(!(e.statusCode>=300))return{...(0,D.Tj)(e.headers,{ETag:"etag"}),$metadata:(0,b.j)(e)};{let t=await (0,F.VY)(e);throw(0,D.Pu)(t,e.statusCode)}},eh=(0,N.A)(U.o,eu,ep,{...F.sb,responseType:"text"}),eg=async({dataChunkerGenerator:e,completedPartNumberSet:t,s3Config:n,abortSignal:i,bucket:o,finalKey:r,uploadId:a,onPartUploadCompletion:s,onProgress:d,isObjectLockEnabled:l,useCRC32Checksum:u,expectedBucketOwner:p})=>{let h=0;for(let{data:g,partNumber:E,size:f}of e){if(i.aborted){c.v.debug("upload executor aborted.");break}if(t.has(E))c.v.debug(`part ${E} already uploaded.`),h+=f,d?.({transferredBytes:h});else{let e;u&&(e=await j(g));let t=!e&&l?await A(g):void 0,{ETag:c}=await eh({...n,abortSignal:i,onUploadProgress:e=>{let{transferredBytes:t}=e;d?.({transferredBytes:h+t})}},{Bucket:o,Key:r,UploadId:a,Body:g,PartNumber:E,ChecksumCRC32:e?.checksum,ContentMD5:t,ExpectedBucketOwner:p});h+=f,s(E,c,e?.checksum)}}},eE=async(e,t)=>{let n=new k.o(t.url.toString());return(0,M.Nt)(!!e.Key,"Key"),n.pathname=(0,M.DB)(n,e.Key),(0,M.Nt)(!!e.UploadId,"UploadId"),n.search=new k.g({uploadId:e.UploadId}).toString(),{method:"GET",headers:{},url:n}},ef=async e=>{if(e.statusCode>=300){let t=await (0,F.VY)(e);throw(0,D.Pu)(t,e.statusCode)}{let t=await (0,Y.t)(e),n=(0,D.Tj)(t,{UploadId:"UploadId",Parts:["Part",e=>(0,D.y_)(e,D.OO)]});return{$metadata:(0,b.j)(e),...n}}},em=(0,N.A)(U.o,eE,ef,{...F.sb,responseType:"text"}),ey=async({resumableUploadsCache:e,cacheKey:t,s3Config:n,bucket:i,finalKey:o})=>{let r=await ex(e);if(!r[t]||r[t].lastTouched<Date.now()-36e5)return null;let s=r[t];s.lastTouched=Date.now(),await e.setItem(a.V3,JSON.stringify(r));try{let{Parts:e=[]}=await em(n,{Bucket:i,Key:o,UploadId:s.uploadId});return{parts:e,uploadId:s.uploadId,finalCrc32:s.finalCrc32}}catch(n){return c.v.debug("failed to list cached parts, removing cached upload."),await ew(e,t),null}},ex=async e=>{try{return JSON.parse(await e.getItem(a.V3)??"{}")}catch(e){return c.v.debug("failed to parse cached uploads record."),{}}},eI=(e={})=>{let t=["onProgress","resumableUploadsCache","locationCredentialsProvider"];return JSON.stringify(Object.fromEntries(Object.entries(e).filter(([e])=>!t.includes(e))))},eS=({file:e,size:t,contentType:n,bucket:i,accessLevel:o,key:r,optionsHash:a})=>{let s;let c=n??e?.type??"application/octet-stream";s=void 0===o?"custom":"guest"===o?"public":o;let d=`${a}_${t}_${c}_${i}_${s}_${r}`;return e?`${e.name}_${e.lastModified}_${d}`:d},ev=async(e,t,n)=>{let i=await ex(e);i[t]={...n,lastTouched:Date.now()},await e.setItem(a.V3,JSON.stringify(i))},ew=async(e,t)=>{let n=await ex(e);delete n[t],await e.setItem(a.V3,JSON.stringify(n))},eC=({size:e,onProgress:t})=>{let n=[],i=()=>n.reduce((e,t)=>e+t,0);return{getOnProgressListener:()=>{n.push(0);let o=n.length-1;return r=>{let{transferredBytes:a}=r;n[o]=a,t?.({transferredBytes:i(),totalBytes:e})}}}},eA=async(e,t)=>{let n={...await (0,M.qH)(e),...(0,M.Sl)({"x-amz-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner})},i=new k.o(t.url.toString());return(0,M.Nt)(!!e.Key,"Key"),i.pathname=(0,M.DB)(i,e.Key),i.search="uploads",(0,O.L)({bucketName:e.Bucket,key:e.Key,objectURL:i}),{method:"POST",headers:n,url:i}},eT=async e=>{if(e.statusCode>=300){let t=await (0,F.VY)(e);throw(0,D.Pu)(t,e.statusCode)}{let t=await (0,Y.t)(e),n=(0,D.Tj)(t,{UploadId:"UploadId"});return{$metadata:(0,b.j)(e),...n}}},eR=(0,N.A)(U.o,eA,eT,{...F.sb,responseType:"text"}),eP=e=>{if(!e)return a.US;let t=a.US,n=Math.ceil(e/t);for(;n>a.GE;)t*=2,n=Math.ceil(e/t);return t},eb=(e,t)=>{let n=eP(t);if(e instanceof Blob)return ek(e,0,e.size,n);if(ArrayBuffer.isView(e))return ek(e.buffer,e.byteOffset,e.byteLength,n);if(e instanceof ArrayBuffer)return ek(e,0,e.byteLength,n);if("string"==typeof e){let t=new Blob([e]);return eb(t,t.size)}throw new G.a({name:r.q.InvalidUploadSource,...r.u[r.q.InvalidUploadSource]})},ek=function*(e,t,n,i){let o=1,r=t,a=t+Math.min(i,n);for(;a<n+t;)yield{partNumber:o,data:e.slice(r,a),size:i},o+=1,a=(r=a)+i;yield{partNumber:o,data:e.slice(r,n+t),size:n+t-r}},eN=async(e,t)=>{let n=[],i=eb(e,t),o=0;for(let{data:e}of i){let t=new Uint8Array((await j(e)).checksumArrayBuffer);o+=t.length,n.push(t)}let r=new Uint8Array(o),a=0;for(let e of n)r.set(e,a),a+=e.length;return`${(await j(r.buffer)).checksum}-${n.length}`},eU=async({s3Config:e,data:t,size:n,contentType:i,bucket:o,accessLevel:r,keyPrefix:s,key:d,contentDisposition:l,contentEncoding:u,metadata:p,abortSignal:h,checksumAlgorithm:g,optionsHash:E,resumableUploadsCache:f,expectedBucketOwner:m})=>{let y;let x=void 0!==s?s+d:d;if(f){let a=eS({size:n,contentType:i,file:t instanceof File?t:void 0,bucket:o,accessLevel:r,key:d,optionsHash:E}),s=await ey({s3Config:e,cacheKey:a,bucket:o,finalKey:x,resumableUploadsCache:f});y=s?{...s,uploadCacheKey:a}:void 0}else c.v.debug("uploaded cache instance cannot be determined, skipping cache."),y=void 0;if(y)return{uploadId:y.uploadId,cachedParts:y.parts,finalCrc32:y.finalCrc32};{let s=g===a.aC?await eN(t,n):void 0,{UploadId:c}=await eR({...e,abortSignal:h},{Bucket:o,Key:x,ContentType:i,ContentDisposition:(0,H.q)(l),ContentEncoding:u,Metadata:p,ChecksumAlgorithm:s?"CRC32":void 0,ExpectedBucketOwner:m});if(f){let e=eS({size:n,contentType:i,file:t instanceof File?t:void 0,bucket:o,accessLevel:r,key:d,optionsHash:E});await ev(f,e,{uploadId:c,bucket:o,key:d,finalCrc32:s,fileName:t instanceof File?t.name:""})}return{uploadId:c,cachedParts:[],finalCrc32:s}}},eD=(e,t)=>{let n,i,o,r,d,l,u,g,E,f,m,y;let x=!1,{resumableUploadsCache:I}=e.options??{},S=async()=>{let{options:n,data:i}=e,s=await (0,T.a)(p.H,e);d=new AbortController,x=!1,r=s.s3Config,u=s.bucket,E=s.identityId,y=n?.expectedBucketOwner;let{inputType:c,objectKey:S}=(0,P.d)(e,E),{contentDisposition:v,contentEncoding:w,contentType:C="application/octet-stream",metadata:A,preventOverwrite:R,onProgress:b}=n??{};if(m=S,c===a.nf){let e=n?.accessLevel;m=(g=s.keyPrefix)+S,l=eM(e)}let{checksum:k}=await j(eI(n));if(!o){let{uploadId:e,cachedParts:a,finalCrc32:s}=await eU({s3Config:r,accessLevel:l,bucket:u,keyPrefix:g,key:S,contentType:C,contentDisposition:v,contentEncoding:w,metadata:A,data:i,size:t,abortSignal:d.signal,checksumAlgorithm:n?.checksumAlgorithm,optionsHash:k,resumableUploadsCache:I,expectedBucketOwner:y});o={uploadId:e,completedParts:a,finalCrc32:s}}f=t?eS({file:i instanceof File?i:void 0,accessLevel:l,contentType:n?.contentType,bucket:u,size:t,key:S,optionsHash:k}):void 0;let N=eb(i,t),U=new Set(o.completedParts.map(({PartNumber:e})=>e)),D=(e,t,n)=>{o?.completedParts.push({PartNumber:e,ETag:t,...n?{ChecksumCRC32:n}:{}})},M=eC({size:t,onProgress:b}),O=[];for(let e=0;e<a.Ek;e++)O.push(eg({dataChunkerGenerator:N,completedPartNumberSet:U,s3Config:r,abortSignal:d.signal,bucket:u,finalKey:m,uploadId:o.uploadId,onPartUploadCompletion:D,onProgress:M.getOnProgressListener(),isObjectLockEnabled:s.isObjectLockEnabled,useCRC32Checksum:!!o.finalCrc32,expectedBucketOwner:y}));await Promise.all(O),eO(o.completedParts,t);let{ETag:F}=await es({...r,abortSignal:d.signal,userAgentValue:(0,K.B)(h.sZ.UploadData)},{Bucket:u,Key:m,UploadId:o.uploadId,ChecksumCRC32:o.finalCrc32,IfNoneMatch:R?"*":void 0,MultipartUpload:{Parts:eF(o.completedParts)},ExpectedBucketOwner:y});if(t){let{ContentLength:e}=await (0,el.C)(r,{Bucket:u,Key:m,ExpectedBucketOwner:y});if(e&&e!==t)throw new G.a({name:"Error",message:`Upload failed. Expected object size ${t}, but got ${e}.`})}I&&f&&await ew(I,f);let _={eTag:F,contentType:C,metadata:A};return c===a.nf?{key:S,..._}:{path:S,..._}},v=()=>S().then(n).catch(e=>{let t=d?.signal;t?.aborted&&x?c.v.debug("upload paused."):i(e)});return{multipartUploadJob:()=>new Promise((e,t)=>{n=e,i=t,v()}),onPause:()=>{x=!0,d?.abort()},onResume:()=>{v()},onCancel:e=>{d?.abort(e),(async()=>{f&&I&&await ew(I,f),await ed(r,{Bucket:u,Key:m,UploadId:o?.uploadId,ExpectedBucketOwner:y})})().catch(e=>{c.v.debug("error when cancelling upload task.",e)}),i(new s.k(e?{message:e}:void 0))}}},eM=e=>e??p.H.libraryOptions.Storage?.S3?.defaultAccessLevel??a.eQ,eO=(e,t)=>{let n=Math.ceil(t/eP(t)),i=e.length===n,o=eF(e).every((e,t)=>e.PartNumber===t+1);if(!i||!o)throw new J.c},eF=e=>[...e].sort((e,t)=>e.PartNumber-t.PartNumber),e_=e=>{let{data:t}=e,n=u(t);if((0,o.M)(void 0!==n,r.q.InvalidUploadSource),(0,o.M)(n<=a.ju,r.q.ObjectIsTooLarge),n<=a.US){let t=new AbortController;return l({isMultipartUpload:!1,job:W(e,t.signal,n),onCancel:e=>{t.abort(e)}})}{let{multipartUploadJob:t,onPause:i,onResume:o,onCancel:r}=eD(e,n);return l({isMultipartUpload:!0,job:t,onCancel:e=>{r(e)},onPause:i,onResume:o})}};function eL(e){return e_({...e,options:{...e?.options,resumableUploadsCache:i.ZL}})}},29486:(e,t,n)=>{"use strict";n.d(t,{DB:()=>d,Nt:()=>l,Sl:()=>a,qH:()=>s});var i=n(44867),o=n(99994),r=n(50234);let a=e=>{let t={};for(let[n,i]of Object.entries(e))null!=i&&(t[n]=i.toString());return t},s=async e=>({...a({"x-amz-acl":e.ACL,"cache-control":e.CacheControl,"content-disposition":e.ContentDisposition,"content-language":e.ContentLanguage,"content-encoding":e.ContentEncoding,"content-type":e.ContentType,expires:e.Expires?.toUTCString(),"x-amz-tagging":e.Tagging,...c(e.Metadata)})}),c=(e={})=>Object.keys(e).reduce((t,n)=>(t[`x-amz-meta-${n.toLowerCase()}`]=e[n],t),{}),d=(e,t)=>e.pathname.replace(/\/$/,"")+`/${t.split("/").map(i.$).join("/")}`;function l(e,t){if(!e)throw new r.a({name:o.m.Unknown,message:"An unknown error has occurred.",underlyingError:TypeError(`Expected a non-null value for S3 parameter ${t}`),recoverySuggestion:"This is likely to be a bug. Please reach out to library authors."})}},30194:(e,t,n)=>{"use strict";n.d(t,{hv:()=>r,oA:()=>i,pU:()=>o});let i="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",o={},r={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),o[e]=t,r[t]=e}},30840:(e,t,n)=>{"use strict";n.d(t,{p:()=>z});var i=n(42656),o=n(96778);n(180),n(31668);var r=n(96483),a=n(70207),s=n(63159),c=n(66054),d=n(88320),l=n(4274),u=n(70848);let p=e=>void 0!==e.path,h=(e,t)=>{if((0,d.M)(!(e.prefix&&e.path),l.q.InvalidStorageOperationPrefixInput),!p(e))return{inputType:c.C5,objectKey:e.prefix??""};{let{path:n}=e,i="string"==typeof n?n:n({identityId:(0,u.g)(t)});return(0,d.M)(!i.startsWith("/"),l.q.InvalidStoragePathInput),{inputType:c.XB,objectKey:i}}},g=e=>decodeURIComponent(e.replace(/\+/g," "));var E=n(22829),f=n(30017),m=n(83507),y=n(80530),x=n(99708);n(42993),n(45755);var I=n(96423),S=n(29486),v=n(688),w=n(75015);let C=async e=>{if(e.statusCode>=300){let t=await (0,w.VY)(e);throw(0,I.Pu)(t,e.statusCode)}{let t=await (0,y.t)(e),n=(0,I.Tj)(t,{CommonPrefixes:["CommonPrefixes",e=>(0,I.y_)(e,A)],Contents:["Contents",e=>(0,I.y_)(e,R)],ContinuationToken:"ContinuationToken",Delimiter:"Delimiter",EncodingType:"EncodingType",IsTruncated:["IsTruncated",I.OI],KeyCount:["KeyCount",I.vv],MaxKeys:["MaxKeys",I.vv],Name:"Name",NextContinuationToken:"NextContinuationToken",Prefix:"Prefix",StartAfter:"StartAfter"}),i={$metadata:(0,E.j)(e),...n};return N(i),i}},A=e=>e.map(T),T=e=>(0,I.Tj)(e,{Prefix:"Prefix"}),R=e=>e.map(P),P=e=>(0,I.Tj)(e,{Key:"Key",LastModified:["LastModified",I.El],ETag:"ETag",ChecksumAlgorithm:["ChecksumAlgorithm",e=>(0,I.y_)(e,b)],Size:["Size",I.vv],StorageClass:"StorageClass",Owner:["Owner",k]}),b=e=>e.map(e=>String(e)),k=e=>(0,I.Tj)(e,{DisplayName:"DisplayName",ID:"ID"}),N=e=>{let{IsTruncated:t,KeyCount:n,Contents:i=[],CommonPrefixes:o=[],NextContinuationToken:r}=e,a=n===i.length+o.length;if(!(t&&r||!t&&!r)||!a)throw new v.c},U=(0,m.A)(x.o,(e,t)=>{let n=(0,S.Sl)({"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),i=(0,S.Sl)({"list-type":"2","continuation-token":e.ContinuationToken,delimiter:e.Delimiter,"encoding-type":e.EncodingType,"fetch-owner":e.FetchOwner,"max-keys":e.MaxKeys,prefix:e.Prefix,"start-after":e.StartAfter}),o=new f.o(t.url.toString());return o.search=new f.g(i).toString(),{method:"GET",headers:n,url:o}},C,{...w.sb,responseType:"text"});var D=n(64469);let M=async(e,t)=>{let{options:n={}}=t,{s3Config:i,bucket:o,keyPrefix:d,identityId:l}=await (0,r.a)(e,t),{inputType:u,objectKey:p}=h(t,l);(0,s.L)(n.expectedBucketOwner);let g=u===c.C5;n?.listAll&&(n?.pageSize||n?.nextToken)&&a.v.debug(`listAll is set to true, ignoring ${n?.pageSize?`pageSize: ${n?.pageSize}`:""} ${n?.nextToken?`nextToken: ${n?.nextToken}`:""}.`);let E={Bucket:o,Prefix:g?`${d}${p}`:p,MaxKeys:n?.listAll?void 0:n?.pageSize,ContinuationToken:n?.listAll?void 0:n?.nextToken,Delimiter:K(n),ExpectedBucketOwner:n?.expectedBucketOwner,EncodingType:"url"};a.v.debug(`listing items from "${E.Prefix}"`);let f={s3Config:i,listParams:E};return n.listAll?g?O({...f,generatedPrefix:d}):_(f):g?F({...f,generatedPrefix:d}):L(f)},O=async({s3Config:e,listParams:t,generatedPrefix:n})=>{let i=[],o=t.ContinuationToken;do{let{items:r,nextToken:a}=await F({generatedPrefix:n,s3Config:e,listParams:{...t,ContinuationToken:o,MaxKeys:1e3}});i.push(...r),o=a}while(o);return{items:i}},F=async({s3Config:e,listParams:t,generatedPrefix:n})=>{let i={...t};(!i.MaxKeys||i.MaxKeys>1e3)&&(a.v.debug("defaulting pageSize to 1000."),i.MaxKeys=1e3);let r=V(await U({...e,userAgentValue:(0,D.B)(o.sZ.List)},i));return($(i,r),r?.Contents)?{items:r.Contents.map(e=>({key:n?e.Key.substring(n.length):e.Key,eTag:e.ETag,lastModified:e.LastModified,size:e.Size})),nextToken:r.NextContinuationToken}:{items:[]}},_=async({s3Config:e,listParams:t})=>{let n=[],i=[],o=t.ContinuationToken;do{let{items:r,excludedSubpaths:a,nextToken:s}=await L({s3Config:e,listParams:{...t,ContinuationToken:o,MaxKeys:1e3}});n.push(...r),i.push(...a??[]),o=s}while(o);return{items:n,excludedSubpaths:i}},L=async({s3Config:e,listParams:t})=>{let n={...t};(!n.MaxKeys||n.MaxKeys>1e3)&&(a.v.debug("defaulting pageSize to 1000."),n.MaxKeys=1e3);let i=V(await U({...e,userAgentValue:(0,D.B)(o.sZ.List)},n));$(n,i);let{Contents:r,NextContinuationToken:s,CommonPrefixes:c}=i,d=c&&B(c);return r?{items:r.map(e=>({path:e.Key,eTag:e.ETag,lastModified:e.LastModified,size:e.Size})),nextToken:s,excludedSubpaths:d}:{items:[],nextToken:s,excludedSubpaths:d}},B=e=>e.reduce((e,{Prefix:t})=>(t&&e.push(t),e),[]),K=e=>{if(e?.subpathStrategy?.strategy==="exclude")return e?.subpathStrategy?.delimiter??c.KA},$=(e,t)=>{if(e.Bucket!==t.Name||e.Delimiter!==t.Delimiter||e.MaxKeys!==t.MaxKeys||e.Prefix!==t.Prefix||e.ContinuationToken!==t.ContinuationToken)throw new v.c},V=e=>{if("url"!==e.EncodingType)return e;let t={...e};return["Delimiter","Prefix","StartAfter"].forEach(n=>{let i=e[n];"string"==typeof i&&(t[n]=g(i))}),e.Contents&&(t.Contents=e.Contents.map(e=>({...e,Key:e.Key?g(e.Key):e.Key}))),e.CommonPrefixes&&(t.CommonPrefixes=e.CommonPrefixes.map(e=>({...e,Prefix:e.Prefix?g(e.Prefix):e.Prefix}))),t};function z(e){return M(i.H,e??{})}},36696:(e,t,n)=>{"use strict";n.d(t,{k:()=>o,n:()=>r});var i=n(50234);class o extends i.a{constructor(e={}){super({name:"CanceledError",message:"Upload is canceled by user",...e}),this.constructor=o,Object.setPrototypeOf(this,o.prototype)}}let r=e=>!!e&&e instanceof o},36919:(e,t,n)=>{"use strict";n.d(t,{f:()=>p});var i=n(35346),o=n(21854),r=n(40850),a=n(6929),s=n(41578);n(49570);var c=n(66342),d=n(90684),l=n(11719),u=n(44582);async function p(e,t,n,p,h,g,E){let{userPoolId:f,userPoolClientId:m,userPoolEndpoint:y}=g,x=f?.split("_")[1]||"",I=new s.A(t?.SRP_B,16),S=new s.A(t?.SALT,16),v=t?.USER_ID_FOR_SRP;if(!v)throw new i.l({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});let w=await h.getPasswordAuthenticationKey({username:v,password:e,serverBValue:I,salt:S}),C=(0,c.q)(),A={USERNAME:v,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:C,PASSWORD_CLAIM_SIGNATURE:(0,d.I)({username:v,userPoolName:x,challengeParameters:t,dateNow:C,hkdf:w})},T=await E.getDeviceMetadata(v);T&&T.deviceKey&&(A.DEVICE_KEY=T.deviceKey);let R=(0,l.d)({username:v,userPoolId:f,userPoolClientId:m}),P=(0,o.H)({endpointResolver:(0,r.o)({endpointOverride:y})}),b=await P({region:(0,a.J)(f)},{ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:A,ClientMetadata:n,Session:p,ClientId:m,UserContextData:R});return"DEVICE_SRP_AUTH"===b.ChallengeName?(0,u.O)({username:v,config:g,clientMetadata:n,session:b.Session,tokenOrchestrator:E}):b}},39421:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var i=n(15644);let o=new(n(428)).S(i.ZL)},40323:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});let i=()=>"undefined"!=typeof window&&void 0!==window.document},41578:(e,t,n)=>{"use strict";let i,o,r;function a(e,t){null!=e&&this.fromString(e,t)}function s(){return new a(null,null)}n.d(t,{A:()=>a});let c="undefined"!=typeof navigator;c&&"Microsoft Internet Explorer"===navigator.appName?(a.prototype.am=function(e,t,n,i,o,r){let a=32767&t,s=t>>15;for(;--r>=0;){let t=32767&this[e],r=this[e++]>>15,c=s*t+r*a;o=((t=a*t+((32767&c)<<15)+n[i]+(0x3fffffff&o))>>>30)+(c>>>15)+s*r+(o>>>30),n[i++]=0x3fffffff&t}return o},i=30):c&&"Netscape"!==navigator.appName?(a.prototype.am=function(e,t,n,i,o,r){for(;--r>=0;){let r=t*this[e++]+n[i]+o;o=Math.floor(r/0x4000000),n[i++]=0x3ffffff&r}return o},i=26):(a.prototype.am=function(e,t,n,i,o,r){let a=16383&t,s=t>>14;for(;--r>=0;){let t=16383&this[e],r=this[e++]>>14,c=s*t+r*a;o=((t=a*t+((16383&c)<<14)+n[i]+o)>>28)+(c>>14)+s*r,n[i++]=0xfffffff&t}return o},i=28),a.prototype.DB=i,a.prototype.DM=(1<<i)-1,a.prototype.DV=1<<i,a.prototype.FV=0x10000000000000,a.prototype.F1=52-i,a.prototype.F2=2*i-52;let d=[];for(r=0,o=48;r<=9;++r)d[o++]=r;for(r=10,o=97;r<36;++r)d[o++]=r;for(r=10,o=65;r<36;++r)d[o++]=r;function l(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function u(e){let t=s();return t.fromInt(e),t}function p(e){let t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function h(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}h.prototype.convert=function(e){let t=s();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(a.ZERO)>0&&this.m.subTo(t,t),t},h.prototype.revert=function(e){let t=s();return e.copyTo(t),this.reduce(t),t},h.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},h.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},h.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},a.prototype.copyTo=function(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},a.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},a.prototype.fromString=function(e,t){let n;if(16===t)n=4;else if(8===t)n=3;else if(2===t)n=1;else if(32===t)n=5;else if(4===t)n=2;else throw Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let i=e.length,o=!1,r=0;for(;--i>=0;){let t=function(e,t){let n=d[e.charCodeAt(t)];return null==n?-1:n}(e,i);if(t<0){"-"===e.charAt(i)&&(o=!0);continue}o=!1,0===r?this[this.t++]=t:r+n>this.DB?(this[this.t-1]|=(t&(1<<this.DB-r)-1)<<r,this[this.t++]=t>>this.DB-r):this[this.t-1]|=t<<r,(r+=n)>=this.DB&&(r-=this.DB)}this.clamp(),o&&a.ZERO.subTo(this,this)},a.prototype.clamp=function(){let e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t},a.prototype.dlShiftTo=function(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},a.prototype.drShiftTo=function(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},a.prototype.lShiftTo=function(e,t){let n;let i=e%this.DB,o=this.DB-i,r=(1<<o)-1,a=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(n=this.t-1;n>=0;--n)t[n+a+1]=this[n]>>o|s,s=(this[n]&r)<<i;for(n=a-1;n>=0;--n)t[n]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},a.prototype.rShiftTo=function(e,t){t.s=this.s;let n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}let i=e%this.DB,o=this.DB-i,r=(1<<i)-1;t[0]=this[n]>>i;for(let e=n+1;e<this.t;++e)t[e-n-1]|=(this[e]&r)<<o,t[e-n]=this[e]>>i;i>0&&(t[this.t-n-1]|=(this.s&r)<<o),t.t=this.t-n,t.clamp()},a.prototype.subTo=function(e,t){let n=0,i=0,o=Math.min(e.t,this.t);for(;n<o;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},a.prototype.multiplyTo=function(e,t){let n=this.abs(),i=e.abs(),o=n.t;for(t.t=o+i.t;--o>=0;)t[o]=0;for(o=0;o<i.t;++o)t[o+n.t]=n.am(0,i[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&a.ZERO.subTo(t,t)},a.prototype.squareTo=function(e){let t=this.abs(),n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){let i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},a.prototype.divRemTo=function(e,t,n){let i=e.abs();if(i.t<=0)return;let o=this.abs();if(o.t<i.t){null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);return}null===n&&(n=s());let r=s(),c=this.s,d=e.s,l=this.DB-p(i[i.t-1]);l>0?(i.lShiftTo(l,r),o.lShiftTo(l,n)):(i.copyTo(r),o.copyTo(n));let u=r.t,h=r[u-1];if(0===h)return;let g=h*(1<<this.F1)+(u>1?r[u-2]>>this.F2:0),E=this.FV/g,f=(1<<this.F1)/g,m=1<<this.F2,y=n.t,x=y-u,I=null===t?s():t;for(r.dlShiftTo(x,I),n.compareTo(I)>=0&&(n[n.t++]=1,n.subTo(I,n)),a.ONE.dlShiftTo(u,I),I.subTo(r,r);r.t<u;)r[r.t++]=0;for(;--x>=0;){let e=n[--y]===h?this.DM:Math.floor(n[y]*E+(n[y-1]+m)*f);if((n[y]+=r.am(0,e,n,x,0,u))<e)for(r.dlShiftTo(x,I),n.subTo(I,n);n[y]<--e;)n.subTo(I,n)}null!==t&&(n.drShiftTo(u,t),c!==d&&a.ZERO.subTo(t,t)),n.t=u,n.clamp(),l>0&&n.rShiftTo(l,n),c<0&&a.ZERO.subTo(n,n)},a.prototype.invDigit=function(){if(this.t<1)return 0;let e=this[0];if((1&e)==0)return 0;let t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},a.prototype.addTo=function(e,t){let n=0,i=0,o=Math.min(e.t,this.t);for(;n<o;)i+=this[n]+e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i+=e[n],t[n++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[n++]=i:i<-1&&(t[n++]=this.DV+i),t.t=n,t.clamp()},a.prototype.toString=function(e){let t,n;if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8===e)t=3;else if(2===e)t=1;else if(32===e)t=5;else if(4===e)t=2;else throw Error("Only radix 2, 4, 8, 16, 32 are supported");let i=(1<<t)-1,o=!1,r="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(n=this[a]>>s)>0&&(o=!0,r=l(n));a>=0;)s<t?n=(this[a]&(1<<s)-1)<<t-s|this[--a]>>(s+=this.DB-t):(n=this[a]>>(s-=t)&i,s<=0&&(s+=this.DB,--a)),n>0&&(o=!0),o&&(r+=l(n));return o?r:"0"},a.prototype.negate=function(){let e=s();return a.ZERO.subTo(this,e),e},a.prototype.abs=function(){return this.s<0?this.negate():this},a.prototype.compareTo=function(e){let t=this.s-e.s;if(0!=t)return t;let n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},a.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+p(this[this.t-1]^this.s&this.DM)},a.prototype.mod=function(e){let t=s();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(a.ZERO)>0&&e.subTo(t,t),t},a.prototype.equals=function(e){return 0===this.compareTo(e)},a.prototype.add=function(e){let t=s();return this.addTo(e,t),t},a.prototype.subtract=function(e){let t=s();return this.subTo(e,t),t},a.prototype.multiply=function(e){let t=s();return this.multiplyTo(e,t),t},a.prototype.divide=function(e){let t=s();return this.divRemTo(e,t,null),t},a.prototype.modPow=function(e,t,n){let i,o,r,a=e.bitLength(),c=u(1),d=new h(t);if(a<=0)return c;let l=[],g=3,E=(i=a<18?1:a<48?3:a<144?4:a<768?5:6)-1,f=(1<<i)-1;if(l[1]=d.convert(this),i>1){let e=s();for(d.sqrTo(l[1],e);g<=f;)l[g]=s(),d.mulTo(e,l[g-2],l[g]),g+=2}let m=e.t-1,y=!0,x=s();for(a=p(e[m])-1;m>=0;){for(a>=E?o=e[m]>>a-E&f:(o=(e[m]&(1<<a+1)-1)<<E-a,m>0&&(o|=e[m-1]>>this.DB+a-E)),g=i;(1&o)==0;)o>>=1,--g;if((a-=g)<0&&(a+=this.DB,--m),y)l[o].copyTo(c),y=!1;else{for(;g>1;)d.sqrTo(c,x),d.sqrTo(x,c),g-=2;g>0?d.sqrTo(c,x):(r=c,c=x,x=r),d.mulTo(x,l[o],c)}for(;m>=0&&(e[m]&1<<a)==0;)d.sqrTo(c,x),r=c,c=x,x=r,--a<0&&(a=this.DB-1,--m)}let I=d.revert(c);return n(null,I),I},a.ZERO=u(0),a.ONE=u(1)},43118:(e,t,n)=>{"use strict";n.d(t,{H:()=>C});var i=n(35346),o=n(46795),r=n(41578);let a=async({a:e,g:t,k:n,x:i,B:o,N:r,U:a})=>new Promise((s,c)=>{t.modPow(i,r,(t,d)=>{if(t){c(t);return}o.subtract(n.multiply(d)).modPow(e.add(a.multiply(i)),r,(e,t)=>{if(e){c(e);return}s(t.mod(r))})})});var s=n(89397),c=n(49570),d=n(30194);let l=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=d.pU[e[n]];return t},u=e=>{let t=new c.I;t.update(e);let n=l(t.digestSync());return Array(64-n.length).join("0")+n},p=e=>u((0,s.d)(e)),h=/^[89a-f]/i,g=e=>{if(!(e instanceof r.A))throw Error("Not a BigInteger");let t=0>e.compareTo(r.A.ZERO),n=e.abs().toString(16);if(n=n.length%2!=0?`0${n}`:n,n=h.test(n)?`00${n}`:n,t){let e=n.split("").map(e=>{let t=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(t)}).join("");(n=new r.A(e,16).add(r.A.ONE).toString(16)).toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},E=({A:e,B:t})=>{let n=new r.A(p(g(e)+g(t)),16);if(n.equals(r.A.ZERO))throw Error("U cannot be zero.");return n},f=(e,t,n)=>{let i=new c.I(t);i.update(e);let o=i.digestSync(),r=new c.I(o);return r.update(n),r.digestSync().slice(0,16)};var m=n(95690);class y{constructor(e,t){this.words=[];let n=e;n=this.words=n||[],void 0!==t?this.sigBytes=t:this.sigBytes=4*n.length}random(e){let t=[];for(let n=0;n<e;n+=4)t.push((0,m.MY)().getRandomValues(new Uint32Array(1))[0]);return new y(t,e)}toString(){return function(e){let{words:t}=e,{sigBytes:n}=e,i=[];for(let e=0;e<n;e++){let n=t[e>>>2]>>>24-e%4*8&255;i.push((n>>>4).toString(16)),i.push((15&n).toString(16))}return i.join("")}(this)}}let x=e=>{let t=new y().random(e).toString();return(0,s.d)(t)};var I=n(23802);let S=()=>I.Y.convert(x(40));class v{constructor({userPoolName:e,a:t,g:n,A:i,N:a}){this.encoder=o.U,this.userPoolName=e,this.a=t,this.g=n,this.A=i,this.N=a,this.k=new r.A(p(`${g(a)}${g(n)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new i.l({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new i.l({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new i.l({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(e,t){this.randomPassword=S();let n=u(`${e}${t}:${this.randomPassword}`),i=l(x(16));return this.saltToHashDevices=g(new r.A(i,16)),new Promise((e,t)=>{this.g.modPow(new r.A(p(this.saltToHashDevices+n),16),this.N,(n,i)=>{if(n){t(n);return}this.verifierDevices=g(i),e()})})}async getPasswordAuthenticationKey({username:e,password:t,serverBValue:n,salt:i}){if(n.mod(this.N).equals(r.A.ZERO))throw Error("B cannot be zero.");let o=E({A:this.A,B:n}),c=u(`${this.userPoolName}${e}:${t}`),d=new r.A(p(g(i)+c),16),l=await a({a:this.a,g:this.g,k:this.k,x:d,B:n,N:this.N,U:o}),h=this.encoder.convert("Caldera Derived Key"),m=this.encoder.convert("\x01"),y=new Uint8Array(h.byteLength+m.byteLength);return y.set(h,0),y.set(m,h.byteLength),f((0,s.d)(g(l)),(0,s.d)(g(o)),y)}}let w=async({a:e,g:t,N:n})=>new Promise((i,o)=>{t.modPow(e,n,(e,t)=>{if(e){o(e);return}if(t.mod(n).equals(r.A.ZERO)){o(Error("Illegal parameter. A mod N cannot be 0."));return}i(t)})}),C=async e=>{let t=new r.A(d.oA,16),n=new r.A("2",16),i=A(),o=await w({a:i,g:n,N:t});return new v({userPoolName:e,a:i,g:n,A:o,N:t})},A=()=>{let e=l(x(128));return new r.A(e,16)}},44582:(e,t,n)=>{"use strict";n.d(t,{O:()=>p});var i=n(21854),o=n(40850),r=n(6929),a=n(14882),s=n(43118),c=n(66342),d=n(90684),l=n(41578),u=n(11719);async function p({username:e,config:t,clientMetadata:n,session:c,tokenOrchestrator:d}){let{userPoolId:l,userPoolEndpoint:u}=t,p=t.userPoolClientId,g=await d?.getDeviceMetadata(e);(0,a.O_)(g);let E=await (0,s.H)(g.deviceGroupKey),f={USERNAME:e,SRP_A:E.A.toString(16),DEVICE_KEY:g.deviceKey},m=(0,i.H)({endpointResolver:(0,o.o)({endpointOverride:u})}),{ChallengeParameters:y,Session:x}=await m({region:(0,r.J)(l)},{ChallengeName:"DEVICE_SRP_AUTH",ClientId:p,ChallengeResponses:f,ClientMetadata:n,Session:c});return h(e,y,n,x,E,t,d)}async function h(e,t,n,s,p,{userPoolId:h,userPoolClientId:g,userPoolEndpoint:E},f){let m=await f?.getDeviceMetadata(e);(0,a.O_)(m);let y=new l.A(t?.SRP_B,16),x=new l.A(t?.SALT,16),{deviceKey:I}=m,{deviceGroupKey:S}=m,v=await p.getPasswordAuthenticationKey({username:m.deviceKey,password:m.randomPassword,serverBValue:y,salt:x}),w=(0,c.q)(),C={USERNAME:t?.USERNAME??e,PASSWORD_CLAIM_SECRET_BLOCK:t?.SECRET_BLOCK,TIMESTAMP:w,PASSWORD_CLAIM_SIGNATURE:(0,d.I)({username:I,userPoolName:S,challengeParameters:t,dateNow:w,hkdf:v}),DEVICE_KEY:I},A=(0,u.d)({username:e,userPoolId:h,userPoolClientId:g});return(0,i.H)({endpointResolver:(0,o.o)({endpointOverride:E})})({region:(0,r.J)(h)},{ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:g,ChallengeResponses:C,Session:s,ClientMetadata:n,UserContextData:A})}},44867:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});let i=e=>encodeURIComponent(e).replace(/[!'()*]/g,o),o=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`},45554:(e,t,n)=>{"use strict";n.d(t,{L:()=>h});var i=n(96778),o=n(11719),r=n(43118);n(49570);var a=n(82500),s=n(40850),c=n(6929),d=n(23251),l=n(36919),u=n(57954),p=n(49573);async function h({username:e,password:t,clientMetadata:n,config:h,tokenOrchestrator:g,authFlow:E,preferredChallenge:f}){let{userPoolId:m,userPoolClientId:y,userPoolEndpoint:x}=h,I=m?.split("_")[1]||"",S=await (0,r.H)(I),v={USERNAME:e,SRP_A:S.A.toString(16)};"USER_AUTH"===E&&f&&(v.PREFERRED_CHALLENGE=f);let w=(0,o.d)({username:e,userPoolId:m,userPoolClientId:y}),C=(0,a.R)({endpointResolver:(0,s.o)({endpointOverride:x})}),A=await C({region:(0,c.J)(m),userAgentValue:(0,d.A)(i.BM.SignIn)},{AuthFlow:E,AuthParameters:v,ClientMetadata:n,ClientId:y,UserContextData:w}),{ChallengeParameters:T,Session:R}=A,P=T?.USERNAME??e;return((0,p.d)(P),"PASSWORD_VERIFIER"===A.ChallengeName)?(0,u.i)(l.f,[t,T,n,R,S,h,g],P,g):A}},46795:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});let i={convert:e=>new TextEncoder().encode(e)}},46798:(e,t)=>{!function(e){"undefined"==typeof DO_NOT_EXPORT_CRC?e(t):e({})}(function(e){e.version="1.2.2";var t=function(){for(var e=0,t=Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-0x12477ce0^e>>>1:e>>>1)?-0x12477ce0^e>>>1:e>>>1)?-0x12477ce0^e>>>1:e>>>1)?-0x12477ce0^e>>>1:e>>>1)?-0x12477ce0^e>>>1:e>>>1)?-0x12477ce0^e>>>1:e>>>1)?-0x12477ce0^e>>>1:e>>>1)?-0x12477ce0^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),n=function(e){var t=0,n=0,i=0,o="undefined"!=typeof Int32Array?new Int32Array(4096):Array(4096);for(i=0;256!=i;++i)o[i]=e[i];for(i=0;256!=i;++i)for(n=e[i],t=256+i;t<4096;t+=256)n=o[t]=n>>>8^e[255&n];var r=[];for(i=1;16!=i;++i)r[i-1]="undefined"!=typeof Int32Array?o.subarray(256*i,256*i+256):o.slice(256*i,256*i+256);return r}(t),i=n[0],o=n[1],r=n[2],a=n[3],s=n[4],c=n[5],d=n[6],l=n[7],u=n[8],p=n[9],h=n[10],g=n[11],E=n[12],f=n[13],m=n[14];e.table=t,e.bstr=function(e,n){for(var i=-1^n,o=0,r=e.length;o<r;)i=i>>>8^t[(i^e.charCodeAt(o++))&255];return~i},e.buf=function(e,n){for(var y=-1^n,x=e.length-15,I=0;I<x;)y=m[e[I++]^255&y]^f[e[I++]^y>>8&255]^E[e[I++]^y>>16&255]^g[e[I++]^y>>>24]^h[e[I++]]^p[e[I++]]^u[e[I++]]^l[e[I++]]^d[e[I++]]^c[e[I++]]^s[e[I++]]^a[e[I++]]^r[e[I++]]^o[e[I++]]^i[e[I++]]^t[e[I++]];for(x+=15;I<x;)y=y>>>8^t[(y^e[I++])&255];return~y},e.str=function(e,n){for(var i=-1^n,o=0,r=e.length,a=0,s=0;o<r;)(a=e.charCodeAt(o++))<128?i=i>>>8^t[(i^a)&255]:a<2048?i=(i=i>>>8^t[(i^(192|a>>6&31))&255])>>>8^t[(i^(128|63&a))&255]:a>=55296&&a<57344?(a=(1023&a)+64,s=1023&e.charCodeAt(o++),i=(i=(i=(i=i>>>8^t[(i^(240|a>>8&7))&255])>>>8^t[(i^(128|a>>2&63))&255])>>>8^t[(i^(128|s>>6&15|(3&a)<<4))&255])>>>8^t[(i^(128|63&s))&255]):i=(i=(i=i>>>8^t[(i^(224|a>>12&15))&255])>>>8^t[(i^(128|a>>6&63))&255])>>>8^t[(i^(128|63&a))&255];return~i}})},49573:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var i=n(61235);function o(e){let{dispatch:t}=i.c$;t({type:"SET_USERNAME",value:e})}},50234:(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var i=n(41195);class o extends i.x{constructor(e){super(e),this.constructor=o,Object.setPrototypeOf(this,o.prototype)}}},54830:(e,t,n)=>{"use strict";n.d(t,{d:()=>c});var i=n(88320),o=n(4274);let r=e=>void 0!==e.path;var a=n(66054),s=n(70848);let c=(e,t)=>{if((0,i.M)(!!e.key&&!e.path||!e.key&&!!e.path,o.q.InvalidStorageOperationInput),!r(e))return{inputType:a.nf,objectKey:e.key};{let{path:n}=e,r="string"==typeof n?n:n({identityId:(0,s.g)(t)});return(0,i.M)(!r.startsWith("/"),o.q.InvalidStoragePathInput),{inputType:a.XB,objectKey:r}}}},56276:(e,t,n)=>{"use strict";function i(){return{active:!1}}n.d(t,{z:()=>o});let o=(e=>{let t=e(i(),{type:"RESET"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}})((e,t)=>{switch(t.type){case"SET_USERNAME":return{...e,username:t.value};case"SET_SESSION":return{...e,session:t.value};case"START":return{...e,active:!0};case"RESET":return i();default:return e}})},57954:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});var i=n(35346);async function o(e,t,n,o){try{return await e(...t)}catch(r){if(r instanceof i.l&&"ResourceNotFoundException"===r.name&&r.message.includes("Device does not exist."))return await o.clearDeviceMetadata(n),e(...t);throw r}}},59591:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});var i=n(75318);let o=(e,t,n)=>`${e}/${t}/${n}/${i.VQ}`,r=e=>{let t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}},a=({credentials:e,signingDate:t=new Date,signingRegion:n,signingService:i,uriEscapePath:a=!0})=>{let{accessKeyId:s,secretAccessKey:c,sessionToken:d}=e,{longDate:l,shortDate:u}=r(t);return{accessKeyId:s,credentialScope:o(u,n,i),longDate:l,secretAccessKey:c,sessionToken:d,shortDate:u,signingRegion:n,signingService:i,uriEscapePath:a}}},61235:(e,t,n)=>{"use strict";n.d(t,{c$:()=>u,jN:()=>s,wr:()=>p});var i=n(15644);let o="CognitoSignInState",r={username:`${o}.username`,challengeName:`${o}.challengeName`,signInSession:`${o}.signInSession`,expiry:`${o}.expiry`},a=e=>Number(e)<=Date.now(),s=()=>{u.dispatch({type:"RESET_STATE"})},c=()=>{for(let e of Object.values(r))i.pR.removeItem(e)},d=()=>({username:void 0,challengeName:void 0,signInSession:void 0}),l=()=>{let e=i.pR.getItem(r.expiry);if(!e||a(e))return c(),d();let t=i.pR.getItem(r.username)??void 0;return{username:t,challengeName:i.pR.getItem(r.challengeName)??void 0,signInSession:i.pR.getItem(r.signInSession)??void 0}},u=(e=>{let t=e(d(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}})((e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return h({signInSession:t.value}),{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return h(t.value),{...t.value};case"SET_CHALLENGE_NAME":return h({challengeName:t.value}),{...e,challengeName:t.value};case"SET_USERNAME":return h({username:t.value}),{...e,username:t.value};case"SET_INITIAL_STATE":return l();case"RESET_STATE":return c(),d();default:return e}});function p(e){u.dispatch({type:"SET_SIGN_IN_STATE",value:e})}let h=({challengeName:e,signInSession:t,username:n})=>{n&&i.pR.setItem(r.username,n),e&&i.pR.setItem(r.challengeName,e),t&&(i.pR.setItem(r.signInSession,t),i.pR.setItem(r.expiry,String(Date.now()+18e4)))}},61508:(e,t,n)=>{"use strict";n.d(t,{I:()=>r,h:()=>a});var i=n(49570),o=n(88346);let r=(e,t)=>{let n=new i.I(e??void 0);return n.update(t),n.digestSync()},a=(e,t)=>{let n=r(e,t);return(0,o.n)(n)}},63159:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var i=n(4274),o=n(88320);let r=/^\d{12}/,a=e=>{void 0!==e&&(0,o.M)(r.test(e),i.q.InvalidAWSAccountID)}},64469:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});var i=n(77246),o=n(96778);function r(e){return(0,i.fE)({category:o.b7.Storage,action:e})}},65410:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var i=n(82321);function o(e,t){if(t){let n=e?.find(e=>e===t);if(!n)throw i.jK;return n}{let t=e?.find(r)??e?.find(a),n=e?.find(c)??e?.find(s);if(t)return t;if(n)throw i.$6;throw i.RW}}let r=e=>e.startsWith(String((window.location.origin+window.location.pathname)??"/")),a=e=>e.includes(String(window.location.hostname)),s=e=>e.startsWith("http://"),c=e=>e.startsWith("https://")},65600:(e,t,n)=>{"use strict";var i,o,r,a,s,c,d,l,u,p,h,g,E,f,m,y,x,I,S,v,w,C,A,T;n.d(t,{AU:()=>S,zh:()=>m}),function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"}(i||(i={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(o||(o={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(r||(r={})),function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(a||(a={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(s||(s={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(c||(c={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(d||(d={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(l||(l={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(u||(u={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(p||(p={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(h||(h={})),function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"}(g||(g={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(E||(E={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"}(f||(f={})),function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(m||(m={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"}(y||(y={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(x||(x={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(I||(I={})),function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"}(S||(S={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(v||(v={})),function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(w||(w={})),function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(C||(C={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(A||(A={})),function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"}(T||(T={}))},66054:(e,t,n)=>{"use strict";n.d(t,{C5:()=>p,Ek:()=>l,GE:()=>d,KA:()=>E,L5:()=>a,US:()=>s,V3:()=>u,XB:()=>g,YE:()=>i,aC:()=>f,eQ:()=>o,hT:()=>r,ju:()=>c,nf:()=>h});let i="http://localhost:20005",o="guest",r=900,a=6048e5,s=5242880,c=0x50000000000,d=1e4,l=4,u="__uploadInProgress",p="prefix",h="key",g="path",E="/",f="crc-32"},66095:(e,t,n)=>{"use strict";n.d(t,{Qd:()=>o,S6:()=>r,V5:()=>s,c9:()=>d,iE:()=>i,sj:()=>a,x0:()=>c});let i="Network Error",o="ERR_NETWORK",r="Request aborted",a="ERR_ABORTED",s="canceled",c="ERR_CANCELED",d="x-amz-content-sha256"},66342:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});let i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=()=>{let e=new Date,t=o[e.getUTCDay()],n=i[e.getUTCMonth()],r=e.getUTCDate(),a=e.getUTCHours();a<10&&(a=`0${a}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let c=e.getUTCSeconds();c<10&&(c=`0${c}`);let d=e.getUTCFullYear();return`${t} ${n} ${r} ${a}:${s}:${c} UTC ${d}`}},66685:(e,t,n)=>{"use strict";n.d(t,{Uv:()=>u,Qm:()=>h});var i,o=n(62468),r=n(35346);let a={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var s=n(30525);(i||(i={})).InvalidAuthTokens="InvalidAuthTokens";let c={[i.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},d=(0,s.p)(c),l="CognitoIdentityServiceProvider";class u{getKeyValueStorage(){if(!this.keyValueStorage)throw new r.l({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{let e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new r.l({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let n=(0,o.Cq)(t),i=await this.getKeyValueStorage().getItem(e.idToken),a=i?(0,o.Cq)(i):void 0,s=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,c=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",d=Number.parseInt(c),l=await this.getKeyValueStorage().getItem(e.signInDetails),u={accessToken:n,idToken:a,refreshToken:s,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:d,username:await this.getLastAuthUser()};return l&&(u.signInDetails=JSON.parse(l)),u}catch(e){return null}}async storeTokens(e){d(void 0!==e,i.InvalidAuthTokens);let t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);let n=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(n.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(n.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(n.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(n.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(n.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(n.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(n.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(n.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(n.signInDetails),await this.getKeyValueStorage().setItem(n.clockDrift,`${e.clockDrift}`)}async clearTokens(){let e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){let t=await this.getAuthKeys(e),n=await this.getKeyValueStorage().getItem(t.deviceKey),i=await this.getKeyValueStorage().getItem(t.deviceGroupKey),o=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return o&&i&&n?{deviceKey:n,deviceGroupKey:i,randomPassword:o}:null}async clearDeviceMetadata(e){let t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){(0,o.$y)(this.authConfig?.Cognito);let t=e??await this.getLastAuthUser();return p(l,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){(0,o.$y)(this.authConfig?.Cognito);let e=this.authConfig.Cognito.userPoolClientId;return`${l}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){let{oauthMetadata:t}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(t,JSON.stringify(e))}async getOAuthMetadata(){let{oauthMetadata:e}=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e);return t&&JSON.parse(t)}}let p=(e,t)=>h(a)(`${e}`,t);function h(e){let t=Object.values({...e});return(e,n)=>t.reduce((t,i)=>({...t,[i]:`${e}.${n}.${i}`}),{})}},67634:(e,t,n)=>{"use strict";n.d(t,{I:()=>D});var i=n(42656),o=n(96778),r=n(4274),a=n(22829),s=n(75318),c=n(30017),d=n(59591),l=n(94877);let u=({body:e,method:t="GET",url:n},{expiration:i,...o})=>{let r=(0,d.y)(o),{accessKeyId:a,credentialScope:u,longDate:p,sessionToken:h}=r,g=new c.o(n);Object.entries({[s.XI]:s.EK,[s.tI]:`${a}/${u}`,[s.Zs]:p,[s.FY]:s.zX,...i&&{[s.MS]:i.toString()},...h&&{[s.r2]:h}}).forEach(([e,t])=>{g.searchParams.append(e,t)});let E={body:e,headers:{[s.zX]:n.host},method:t,url:g},f=(0,l.d)(E,r);return g.searchParams.append(s.cR,f),g};var p=n(83507),h=n(66095),g=n(99708);n(42993),n(45755);var E=n(96423),f=n(29486),m=n(20875),y=n(75015);let x=async(e,t)=>{let n=new c.o(t.url.toString());return(0,f.Nt)(!!e.Key,"Key"),n.pathname=(0,f.DB)(n,e.Key),(0,m.L)({bucketName:e.Bucket,key:e.Key,objectURL:n}),{method:"GET",headers:{...e.Range&&{Range:e.Range},...(0,f.Sl)({"x-amz-expected-bucket-owner":e.ExpectedBucketOwner})},url:n}},I=async e=>{if(!(e.statusCode>=300))return{...(0,E.Tj)(e.headers,{DeleteMarker:["x-amz-delete-marker",E.OI],AcceptRanges:"accept-ranges",Expiration:"x-amz-expiration",Restore:"x-amz-restore",LastModified:["last-modified",E.El],ContentLength:["content-length",E.vv],ETag:"etag",ChecksumCRC32:"x-amz-checksum-crc32",ChecksumCRC32C:"x-amz-checksum-crc32c",ChecksumSHA1:"x-amz-checksum-sha1",ChecksumSHA256:"x-amz-checksum-sha256",MissingMeta:["x-amz-missing-meta",E.vv],VersionId:"x-amz-version-id",CacheControl:"cache-control",ContentDisposition:"content-disposition",ContentEncoding:"content-encoding",ContentLanguage:"content-language",ContentRange:"content-range",ContentType:"content-type",Expires:["expires",E.El],WebsiteRedirectLocation:"x-amz-website-redirect-location",ServerSideEncryption:"x-amz-server-side-encryption",SSECustomerAlgorithm:"x-amz-server-side-encryption-customer-algorithm",SSECustomerKeyMD5:"x-amz-server-side-encryption-customer-key-md5",SSEKMSKeyId:"x-amz-server-side-encryption-aws-kms-key-id",BucketKeyEnabled:["x-amz-server-side-encryption-bucket-key-enabled",E.OI],StorageClass:"x-amz-storage-class",RequestCharged:"x-amz-request-charged",ReplicationStatus:"x-amz-replication-status",PartsCount:["x-amz-mp-parts-count",E.vv],TagCount:["x-amz-tagging-count",E.vv],ObjectLockMode:"x-amz-object-lock-mode",ObjectLockRetainUntilDate:["x-amz-object-lock-retain-until-date",E.El],ObjectLockLegalHoldStatus:"x-amz-object-lock-legal-hold"}),Metadata:(0,E.nl)(e.headers),$metadata:(0,a.j)(e),Body:e.body};{let t=await (0,y.VY)(e);throw(0,E.Pu)(t,e.statusCode)}};(0,p.A)(g.o,x,I,{...y.sb,responseType:"blob"});let S=async(e,t)=>{let n=y.sb.endpointResolver(e,t),{url:i,headers:o,method:r}=await x(t,n);for(let[n,r]of(i.searchParams.append(h.c9,s.fM),e.userAgentValue&&i.searchParams.append(e.userAgentHeader??"x-amz-user-agent",e.userAgentValue),t.ResponseContentType&&i.searchParams.append("response-content-type",t.ResponseContentType),t.ResponseContentDisposition&&i.searchParams.append("response-content-disposition",t.ResponseContentDisposition),Object.entries(o).sort(([e],[t])=>e.localeCompare(t))))i.searchParams.append(n,r);return u({method:r,url:i,body:void 0},{signingService:y.sb.service,signingRegion:e.region,...y.sb,...e})};n(180),n(31668);var v=n(96483),w=n(88320),C=n(63159),A=n(54830),T=n(66054),R=n(69246),P=n(70207),b=n(16119),k=n(64469);let N=async(e,t,n)=>{let{s3Config:i,bucket:r,keyPrefix:a,identityId:s}=await (0,v.a)(e,t),{inputType:c,objectKey:d}=(0,A.d)(t,s);(0,C.L)(t.options?.expectedBucketOwner);let l=c===T.nf?a+d:d;P.v.debug(`get properties of ${d} from ${l}`);let u=await (0,b.C)({...i,userAgentValue:(0,k.B)(n??o.sZ.GetProperties)},{Bucket:r,Key:l,ExpectedBucketOwner:t.options?.expectedBucketOwner}),p={contentType:u.ContentType,size:u.ContentLength,eTag:u.ETag,lastModified:u.LastModified,metadata:u.Metadata,versionId:u.VersionId};return c===T.nf?{key:d,...p}:{path:d,...p}},U=async(e,t)=>{let{options:n}=t,{s3Config:i,keyPrefix:a,bucket:s,identityId:c}=await (0,v.a)(e,t),{inputType:d,objectKey:l}=(0,A.d)(t,c);(0,C.L)(n?.expectedBucketOwner);let u=d===T.nf?a+l:l;n?.validateObjectExistence&&await N(e,t,o.sZ.GetUrl);let p=n?.expiresIn??T.hT,h="function"==typeof i.credentials?await i.credentials():i.credentials,g=h.expiration;g&&(p=Math.min(Math.floor((g.getTime()-Date.now())/1e3),p));let E=T.L5/1e3;return(0,w.M)(p<=E,r.q.UrlExpirationMaxLimitExceed),{url:await S({...i,credentials:h,expiration:p},{Bucket:s,Key:u,...n?.contentDisposition&&{ResponseContentDisposition:(0,R.q)(n.contentDisposition)},...n?.contentType&&{ResponseContentType:n.contentType},ExpectedBucketOwner:n?.expectedBucketOwner}),expiresAt:new Date(Date.now()+1e3*p)}};function D(e){return U(i.H,e)}},69246:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});let i=e=>{if(!e)return;if("string"==typeof e)return e;let{type:t,filename:n}=e;return void 0!==n?`${t}; filename="${n}"`:t}},70207:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let i=new(n(87410)).C("Storage")},70848:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});var i=n(4274),o=n(88320);let r=e=>((0,o.M)(!!e,i.q.NoIdentityId),e)},75015:(e,t,n)=>{"use strict";n.d(t,{sb:()=>I,VY:()=>y,TZ:()=>x});var i=n(30017),o=n(77246),r=n(56819),a=n(29563),s=n(80530);n(42993),n(45755);var c=n(76021);let d=["RequestExpired","ExpiredTokenException","ExpiredToken"],l=(e,t)=>{let n=!!e&&d.includes(e),i=!!e&&!!t&&e.includes("Signature")&&t.includes("expired");return n||i};var u=n(66054),p=n(88320),h=n(4274);let g=/^[a-z0-9][a-z0-9.-]{1,61}[a-z0-9]$/,E=/(\d+\.){3}\d+/,f=/\.\./,m=e=>g.test(e)&&!E.test(e)&&!f.test(e),y=(0,s.V)({noErrorWrapping:!0}),x=(e=>async(t,n,i)=>{let o=(0,c.D)(e),r=await o(t,n);if(!t)return{retryable:r.retryable};let a=await e(t),s=l(a?.name,a?.message);return{retryable:r.retryable||!!(s&&!i?.isCredentialsExpired),isCredentialsExpiredError:s}})(y),I={service:"s3",endpointResolver:(e,t)=>{let n;let{region:o,useAccelerateEndpoint:a,customEndpoint:s,forcePathStyle:c}=e;return s?(s===u.YE&&(n=new i.o(s)),(0,p.M)(!s.includes("://"),h.q.InvalidCustomEndpoint),n=new i.o(`https://${s}`)):a?((0,p.M)(!c,h.q.ForcePathStyleEndpointNotSupported),n=new i.o(`https://s3-accelerate.${(0,r.R)(o)}`)):n=new i.o(`https://s3.${o}.${(0,r.R)(o)}`),t?.Bucket&&((0,p.M)(m(t.Bucket),h.q.DnsIncompatibleBucketName),c||t.Bucket.includes(".")?n.pathname=`/${t.Bucket}`:n.host=`${t.Bucket}.${n.host}`),{url:n}},retryDecider:x,computeDelay:a.y,userAgentValue:(0,o.fE)(),useAccelerateEndpoint:!1,uriEscapePath:!1}},75318:(e,t,n)=>{"use strict";n.d(t,{EK:()=>E,FY:()=>c,H1:()=>l,MS:()=>a,VQ:()=>g,XI:()=>i,Zs:()=>o,cR:()=>s,fM:()=>m,nt:()=>f,ot:()=>p,r2:()=>d,tI:()=>r,wE:()=>h,z8:()=>y,zX:()=>u});let i="X-Amz-Algorithm",o="X-Amz-Date",r="X-Amz-Credential",a="X-Amz-Expires",s="X-Amz-Signature",c="X-Amz-SignedHeaders",d="X-Amz-Security-Token",l="authorization",u="host",p=o.toLowerCase(),h=d.toLowerCase(),g="aws4_request",E="AWS4-HMAC-SHA256",f="AWS4",m="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",y="UNSIGNED-PAYLOAD"},76313:(e,t,n)=>{"use strict";n.d(t,{i:()=>E});var i=n(23802);let o=async()=>{let{userAgentData:e}=navigator;if(!e)return navigator.userAgent;let{platform:t="",platformVersion:n="",model:i="",architecture:o="",fullVersionList:r=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]);return[t,n,o,i,t,r.map(e=>`${e.brand}/${e.version}`).join(";")].filter(e=>e).join(" ")||navigator.userAgent};var r=n(83507),a=n(49240),s=n(87395),c=n(83578),d=n(74267);let l=e=>(0,r.A)(a.e,(0,s._)("ConfirmDevice"),(0,c.T)(),{...d.C,...e});var u=n(40850),p=n(6929),h=n(43118),g=n(89397);async function E({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:n,accessToken:r}){if(!n)return;let a=e.split("_")[1]||"",s=await (0,h.H)(a),c=n?.DeviceKey,d=n?.DeviceGroupKey;try{await s.generateHashDevice(d??"",c??"")}catch(e){return}let E={Salt:i.Y.convert((0,g.d)(s.getSaltToHashDevices())),PasswordVerifier:i.Y.convert((0,g.d)(s.getVerifierDevices()))},f=s.getRandomPassword();try{let i=l({endpointResolver:(0,u.o)({endpointOverride:t})});return await i({region:(0,p.J)(e)},{AccessToken:r,DeviceName:await o(),DeviceKey:n?.DeviceKey,DeviceSecretVerifierConfig:E}),{deviceKey:c,deviceGroupKey:d,randomPassword:f}}catch(e){return}}n(49570)},76545:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});var i=n(43425),o=n(8773),r=n(82321),a=n(35346);let s=async()=>{try{i.YZ.dispatch("auth",{event:"signedIn",data:await (0,o.H)()},"Auth",i.U9)}catch(e){if(e.name===r.zz)throw new a.l({name:r.yA,message:"Unable to get user session following successful sign-in.",recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."});throw e}}},79402:(e,t,n)=>{"use strict";n.d(t,{C:()=>N});var i=n(87410),o=n(42656),r=n(15644);function a(){return o.H.Auth.clearCredentials()}var s=n(43425),c=n(62468),d=n(96778),l=n(23251),u=n(35346),p=n(428),h=n(11826),g=n(6929),E=n(14882);n(49570);let f=async e=>{await e.clearOAuthData(),h.o.clearTokens(),await a(),s.YZ.dispatch("auth",{event:"signedOut"},"Auth",s.U9)},m=async e=>{window?.location&&(window.location.href=e.replace("http://","https://"))};var y=n(65410);let x=async(e,t=!1,n)=>{(0,c.G6)(e);let{loginWith:i,userPoolClientId:o}=e,{domain:r,redirectSignOut:a}=i.oauth,s=(0,y.M)(a,n);return m(`https://${r}/logout?${Object.entries({client_id:o,logout_uri:encodeURIComponent(s)}).map(([e,t])=>`${e}=${t}`).join("&")}`)},I=async(e,t,n,i)=>{let{isOAuthSignIn:o}=await t.loadOAuthSignIn(),r=await n.getOAuthMetadata();if(await f(t),o||r?.oauthSignIn)return x(e,!1,i)};var S=n(82321),v=n(83507),w=n(49240),C=n(87395),A=n(83578),T=n(74267);let R=e=>(0,v.A)(w.e,(0,C._)("RevokeToken"),(0,A.T)(),{...T.C,...e}),P=e=>(0,v.A)(w.e,(0,C._)("GlobalSignOut"),(0,A.T)(),{...T.C,...e});var b=n(40850);let k=new i.C("Auth");async function N(e){let t;let n=o.H.getConfig().Auth?.Cognito;(0,c.$y)(n),e?.global?await D(n):await U(n);try{(0,c.G6)(n),t=!0}catch(e){t=!1}if(t){let t=new p.S(r.ZL);t.setAuthConfig(n);let{type:i}=await I(n,t,h.o,e?.oauth?.redirectUrl)??{};if("error"===i)throw new u.l({name:S.mh,message:"An error occurred when attempting to log out from OAuth provider."})}else h.o.clearTokens(),await a(),s.YZ.dispatch("auth",{event:"signedOut"},"Auth",s.U9)}async function U(e){try{let{userPoolEndpoint:t,userPoolId:n,userPoolClientId:i}=e,o=await h.o.getTokenStore().loadTokens();if((0,E.X4)(o),M(o.accessToken)){let e=R({endpointResolver:(0,b.o)({endpointOverride:t})});await e({region:(0,g.J)(n),userAgentValue:(0,l.A)(d.BM.SignOut)},{ClientId:i,Token:o.refreshToken})}}catch(e){k.debug("Client signOut error caught but will proceed with token removal")}}async function D(e){try{let{userPoolEndpoint:t,userPoolId:n}=e,i=await h.o.getTokenStore().loadTokens();(0,E.H0)(i);let o=P({endpointResolver:(0,b.o)({endpointOverride:t})});await o({region:(0,g.J)(n),userAgentValue:(0,l.A)(d.BM.SignOut)},{AccessToken:i.accessToken.toString()})}catch(e){k.debug("Global signOut error caught but will proceed with token removal")}}let M=e=>!!e?.payload?.origin_jti},79773:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});let i=e=>Object.keys(e).map(e=>e.toLowerCase()).sort().join(";")},80530:(e,t,n)=>{"use strict";n.d(t,{V:()=>r,t:()=>a});var i=n(22829),o=n(93455);n(14698);let r=({noErrorWrapping:e=!1}={})=>async t=>{if(!t||t.statusCode<300)return;let{statusCode:n}=t,o=await a(t),r=e?o:o.Error,s=r?.Code?r.Code:404===n?"NotFound":n.toString();return Object.assign(Error(r?.message??r?.Message??s),{name:s,$metadata:(0,i.j)(t)})},a=async e=>{if(!e.body)throw Error("S3 aborted request.");let t=await e.body.text();if(t?.length>0)try{return o.K.parse(t)}catch(e){throw Error(`Failed to parse XML response: ${e}`)}return{}}},82321:(e,t,n)=>{"use strict";n.d(t,{$6:()=>l,A0:()=>s,Cs:()=>p,RW:()=>c,jK:()=>d,kM:()=>a,mh:()=>u,yA:()=>h,z0:()=>r,zz:()=>o});var i=n(35346);let o="UserUnAuthenticatedException",r="UserAlreadyAuthenticatedException",a="DeviceMetadataNotFoundException",s="AutoSignInException",c=new i.l({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new i.l({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});let d=new i.l({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),l=new i.l({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),u="OAuthSignOutException",p="TokenRefreshException",h="UnexpectedSignInInterruptionException"},82500:(e,t,n)=>{"use strict";n.d(t,{R:()=>c});var i=n(83507),o=n(87395),r=n(83578),a=n(49240),s=n(74267);let c=e=>(0,i.A)(a.e,(0,o._)("InitiateAuth"),(0,r.T)(),{...s.C,...e})},83718:(e,t,n)=>{"use strict";n.d(t,{J:()=>S});var i=n(1052),o=n(42656),r=n(62468),a=n(69895),s=n(99643),c=n(99529),d=n(61235),l=n(84986),u=n(11826),p=n(76545),h=n(57954),g=n(76313);async function E(e){let t=o.H.getConfig().Auth?.Cognito;(0,r.$y)(t);let{username:n,password:E,options:f}=e,m={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},y=f?.clientMetadata;(0,s.M)(!!n,a.P.EmptySignInUsername),(0,s.M)(!E,a.P.CustomAuthSignInPassword);try{let{ChallengeName:e,ChallengeParameters:o,AuthenticationResult:r,Session:a}=await (0,h.i)(i.ty,[n,y,t,u.o],n,u.o),s=(0,i.ni)(n);if((0,d.wr)({signInSession:a,username:s,challengeName:e,signInDetails:m}),r)return await (0,l.i)({username:s,...r,NewDeviceMetadata:await (0,g.i)({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:m}),(0,d.jN)(),await (0,p.Q)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,i.q2)({challengeName:e,challengeParameters:o})}catch(t){(0,d.jN)(),(0,c.e)(t);let e=(0,i.m$)(t.name);if(e)return e;throw t}}async function f(e){let{username:t,password:n,options:h}=e,E={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},f=o.H.getConfig().Auth?.Cognito;(0,r.$y)(f);let m=h?.clientMetadata;(0,s.M)(!!t,a.P.EmptySignInUsername),(0,s.M)(!!n,a.P.EmptySignInPassword);try{let{ChallengeName:e,ChallengeParameters:o,AuthenticationResult:r,Session:a}=await (0,i.tE)(t,n,m,f,u.o),s=(0,i.ni)(t);if((0,d.wr)({signInSession:a,username:s,challengeName:e,signInDetails:E}),r)return await (0,l.i)({username:s,...r,NewDeviceMetadata:await (0,g.i)({userPoolId:f.userPoolId,userPoolEndpoint:f.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:E}),(0,d.jN)(),await (0,p.Q)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,i.q2)({challengeName:e,challengeParameters:o})}catch(t){(0,d.jN)(),(0,c.e)(t);let e=(0,i.m$)(t.name);if(e)return e;throw t}}var m=n(19078);async function y(e){let{username:t,password:n}=e,h=o.H.getConfig().Auth?.Cognito,E={loginId:t,authFlowType:"USER_SRP_AUTH"};(0,r.$y)(h);let f=e.options?.clientMetadata;(0,s.M)(!!t,a.P.EmptySignInUsername),(0,s.M)(!!n,a.P.EmptySignInPassword);try{let{ChallengeName:e,ChallengeParameters:o,AuthenticationResult:r,Session:a}=await (0,i.Zw)(t,n,f,h,u.o),s=(0,i.ni)(t);if((0,d.wr)({signInSession:a,username:s,challengeName:e,signInDetails:E}),r)return await (0,l.i)({username:s,...r,NewDeviceMetadata:await (0,g.i)({userPoolId:h.userPoolId,userPoolEndpoint:h.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:E}),(0,d.jN)(),await (0,p.Q)(),(0,m.xO)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,i.q2)({challengeName:e,challengeParameters:o})}catch(t){(0,d.jN)(),(0,m.xO)(),(0,c.e)(t);let e=(0,i.m$)(t.name);if(e)return e;throw t}}async function x(e){let{username:t,password:n,options:E}=e,f=o.H.getConfig().Auth?.Cognito,y={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};(0,r.$y)(f);let x=E?.clientMetadata;(0,s.M)(!!t,a.P.EmptySignInUsername),(0,s.M)(!!n,a.P.EmptySignInPassword);try{let{ChallengeName:e,ChallengeParameters:o,AuthenticationResult:r,Session:a}=await (0,h.i)(i.h5,[t,n,x,f,u.o],t,u.o),s=(0,i.ni)(t);if((0,d.wr)({signInSession:a,username:s,challengeName:e,signInDetails:y}),r)return await (0,l.i)({...r,username:s,NewDeviceMetadata:await (0,g.i)({userPoolId:f.userPoolId,userPoolEndpoint:f.userPoolEndpoint,newDeviceMetadata:r.NewDeviceMetadata,accessToken:r.AccessToken}),signInDetails:y}),(0,d.jN)(),await (0,p.Q)(),(0,m.xO)(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};return(0,i.q2)({challengeName:e,challengeParameters:o})}catch(t){(0,d.jN)(),(0,m.xO)(),(0,c.e)(t);let e=(0,i.m$)(t.name);if(e)return e;throw t}}var I=n(2035);async function S(e){(0,m.xO)(!1);let t=e.options?.authFlowType;switch(await (0,i.AR)(),t){case"USER_SRP_AUTH":default:return y(e);case"USER_PASSWORD_AUTH":return x(e);case"CUSTOM_WITHOUT_SRP":return E(e);case"CUSTOM_WITH_SRP":return f(e);case"USER_AUTH":return(0,I.k)(e)}}},83722:(e,t,n)=>{"use strict";n.d(t,{P:()=>y});var i=n(42656),o=n(62468),r=n(96778),a=n(69895),s=n(99643),c=n(23251),d=n(11719),l=n(83507),u=n(49240),p=n(87395),h=n(83578),g=n(74267);let E=e=>(0,l.A)(u.e,(0,p._)("ConfirmForgotPassword"),(0,h.T)(),{...g.C,...e});var f=n(40850),m=n(6929);async function y(e){let t=i.H.getConfig().Auth?.Cognito;(0,o.$y)(t);let{userPoolClientId:n,userPoolId:l,userPoolEndpoint:u}=t,{username:p,newPassword:h}=e;(0,s.M)(!!p,a.P.EmptyConfirmResetPasswordUsername),(0,s.M)(!!h,a.P.EmptyConfirmResetPasswordNewPassword);let g=e.confirmationCode;(0,s.M)(!!g,a.P.EmptyConfirmResetPasswordConfirmationCode);let y=e.options?.clientMetadata,x=(0,d.d)({username:p,userPoolId:l,userPoolClientId:n}),I=E({endpointResolver:(0,f.o)({endpointOverride:u})});await I({region:(0,m.J)(t.userPoolId),userAgentValue:(0,c.A)(r.BM.ConfirmResetPassword)},{Username:p,ConfirmationCode:g,Password:h,ClientMetadata:y,ClientId:t.userPoolClientId,UserContextData:x})}},84986:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});var i=n(62468),o=n(41195),r=n(11826);async function a(e){if(e.AccessToken){let t,n,o;let a=(0,i.Cq)(e.AccessToken),s=1e3*(a.payload.iat||0),c=new Date().getTime();e.RefreshToken&&(n=e.RefreshToken),e.IdToken&&(t=(0,i.Cq)(e.IdToken)),e?.NewDeviceMetadata&&(o=e.NewDeviceMetadata);let d={accessToken:a,idToken:t,refreshToken:n,clockDrift:s>0?s-c:0,deviceMetadata:o,username:e.username};e?.signInDetails&&(d.signInDetails=e.signInDetails),await r.o.setTokens({tokens:d})}else throw new o.x({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}},88320:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});var i=n(4274),o=n(50234);function r(e,t){let{message:n,recoverySuggestion:r}=i.u[t];if(!e)throw new o.a({name:t,message:n,recoverySuggestion:r})}},89397:(e,t,n)=>{"use strict";n.d(t,{d:()=>o});var i=n(30194);let o=e=>{if(e.length%2!=0)throw Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){let o=e.slice(n,n+2).toLowerCase();if(o in i.hv)t[n/2]=i.hv[o];else throw Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t}},90684:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var i=n(49570),o=n(23802),r=n(74552),a=n(46795);let s=({userPoolName:e,username:t,challengeParameters:n,dateNow:r,hkdf:s})=>{let d=a.U.convert(e),l=a.U.convert(t),u=c(n.SECRET_BLOCK),p=a.U.convert(r),h=new Uint8Array(d.byteLength+l.byteLength+u.byteLength+p.byteLength);h.set(d,0),h.set(l,d.byteLength),h.set(u,d.byteLength+l.byteLength),h.set(p,d.byteLength+l.byteLength+u.byteLength);let g=new i.I(s);g.update(h);let E=g.digestSync();return o.Y.convert(E)},c=e=>{let t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),i=r.m.convert(n),o=new Uint8Array(i.length);for(let e=0;e<i.length;++e)o[e]=i.charCodeAt(e);return o}},93455:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});let i={parse:e=>{let t=o(new DOMParser().parseFromString(e,"text/xml")),n=Object.keys(t)[0];return t[n]}},o=e=>{if(a(e))return{[e.documentElement.nodeName]:o(e.documentElement)};if(e.nodeType===Node.TEXT_NODE)return e.nodeValue?.trim();if(r(e)){if(s(e))return e.childNodes[0].nodeValue;let t={};for(let n of e.attributes)d(n.nodeName)||(t[n.nodeName]=n.nodeValue);if(e.children.length>0)for(let n of e.children){let e=o(n);if(void 0===e)continue;let i=n.nodeName;void 0===t[i]?t[i]=e:Array.isArray(t[i])?t[i].push(e):t[i]=[t[i],e]}return 0===Object.keys(t).length?"":t}},r=e=>e.nodeType===Node.ELEMENT_NODE,a=e=>e.nodeType===Node.DOCUMENT_NODE,s=e=>c(e)&&0===e.children.length&&e.firstChild?.nodeType===Node.TEXT_NODE,c=e=>{for(let t of e.attributes)if(!d(t.nodeName))return!1;return!0},d=e=>"xmlns"===e||e.startsWith("xmlns:")},93552:(e,t,n)=>{"use strict";n.d(t,{x:()=>y});var i=n(42656),o=n(62468),r=n(96778),a=n(69895),s=n(99643),c=n(6929),d=n(23251),l=n(11719),u=n(83507),p=n(49240),h=n(87395),g=n(83578),E=n(74267);let f=e=>(0,u.A)(p.e,(0,h._)("ForgotPassword"),(0,g.T)(),{...E.C,...e});var m=n(40850);async function y(e){let{username:t}=e;(0,s.M)(!!t,a.P.EmptyResetPasswordUsername);let n=i.H.getConfig().Auth?.Cognito;(0,o.$y)(n);let{userPoolClientId:u,userPoolId:p,userPoolEndpoint:h}=n,g=e.options?.clientMetadata,E=(0,l.d)({username:t,userPoolId:p,userPoolClientId:u}),y=f({endpointResolver:(0,m.o)({endpointOverride:h})}),x=(await y({region:(0,c.J)(p),userAgentValue:(0,d.A)(r.BM.ResetPassword)},{Username:t,ClientMetadata:g,ClientId:u,UserContextData:E})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:x?.DeliveryMedium,destination:x?.Destination,attributeName:x?.AttributeName}}}}},94877:(e,t,n)=>{"use strict";n.d(t,{d:()=>E});var i=n(61508);let o=e=>Object.entries(e).map(([e,t])=>({key:e.toLowerCase(),value:t?.trim().replace(/\s+/g," ")??""})).sort((e,t)=>e.key<t.key?-1:1).map(e=>`${e.key}:${e.value}
`).join(""),r=e=>Array.from(e).sort(([e,t],[n,i])=>e===n?t<i?-1:1:e<n?-1:1).map(([e,t])=>`${a(e)}=${a(t)}`).join("&"),a=e=>encodeURIComponent(e).replace(/[!'()*]/g,s),s=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,c=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/";var d=n(23752),l=n(79773);let u=({body:e,headers:t,method:n,url:i},a=!0)=>[n,c(i.pathname,a),r(i.searchParams),o(t),(0,l.Z)(t),(0,d.M)(e)].join("\n");var p=n(75318);let h=(e,t,n,o)=>{let r=`${p.nt}${e}`,a=(0,i.I)(r,t),s=(0,i.I)(a,n),c=(0,i.I)(s,o);return(0,i.I)(c,p.VQ)},g=(e,t,n)=>[p.EK,e,t,n].join("\n"),E=(e,{credentialScope:t,longDate:n,secretAccessKey:o,shortDate:r,signingRegion:a,signingService:s,uriEscapePath:c})=>{let d=u(e,c),l=g(n,t,(0,i.h)(null,d));return(0,i.h)(h(o,r,a,s),l)}},96423:(e,t,n)=>{"use strict";n.d(t,{El:()=>s,OI:()=>a,OO:()=>u,Pu:()=>l,Tj:()=>o,nl:()=>d,vv:()=>r,y_:()=>c});var i=n(50234);let o=(e,t)=>{let n={};for(let[i,o]of Object.entries(t)){let[t,r]=Array.isArray(o)?o:[o];Object.prototype.hasOwnProperty.call(e,t)&&(n[i]=r?r(e[t]):String(e[t]))}return n},r=e=>e?Number(e):void 0,a=e=>e?"true"===e:void 0,s=e=>e?new Date(e):void 0,c=(e,t)=>""===e?[]:t((Array.isArray(e)?e:[e]).filter(e=>null!=e)),d=e=>{let t="x-amz-meta-",n=Object.keys(e).filter(e=>e.startsWith(t)).reduce((n,i)=>(n[i.replace(t,"")]=e[i],n),{});return Object.keys(n).length>0?n:void 0},l=(e,t)=>{let n=new i.a({name:e.name,message:e.message});return 404===t&&(n.recoverySuggestion="Please add the object with this key to the bucket as the key is not found."),n},u=e=>e.map(e=>o(e,{PartNumber:["PartNumber",r],ETag:"ETag",ChecksumCRC32:"ChecksumCRC32"}))},96483:(e,t,n)=>{"use strict";n.d(t,{a:()=>c});var i=n(88320),o=n(4274);let r=({accessLevel:e,targetIdentityId:t})=>"private"===e?((0,i.M)(!!t,o.q.NoIdentityId),`private/${t}/`):"protected"===e?((0,i.M)(!!t,o.q.NoIdentityId),`protected/${t}/`):"public/";var a=n(50234),s=n(66054);let c=async(e,t)=>{let{options:n}=t??{},{identityId:a}=await e.Auth.fetchAuthSession(),c=async r=>{d(n)&&p(t);let{credentials:a}=d(n)?await n.locationCredentialsProvider(r):await e.Auth.fetchAuthSession();return(0,i.M)(!!a,o.q.NoCredentials),a},{bucket:l,region:u,dangerouslyConnectToHttpEndpointForTesting:h,buckets:g}=e.getConfig()?.Storage?.S3??{},{bucket:E=l,region:m=u}=n?.bucket&&f(n,g)||{};(0,i.M)(!!E,o.q.NoBucket),(0,i.M)(!!m,o.q.NoRegion);let{defaultAccessLevel:y,prefixResolver:x=r,isObjectLockEnabled:I}=e.libraryOptions?.Storage?.S3??{},S=n?.accessLevel??y??s.eQ,v="protected"===S?n?.targetIdentityId??a:a,w=await x({accessLevel:S,targetIdentityId:v});return{s3Config:{credentials:c,region:m,useAccelerateEndpoint:n?.useAccelerateEndpoint,...n?.customEndpoint?{customEndpoint:n.customEndpoint}:{},...h?{customEndpoint:s.YE,forcePathStyle:!0}:{}},bucket:E,keyPrefix:w,identityId:a,isObjectLockEnabled:I}},d=e=>!!e?.locationCredentialsProvider,l=e=>e?.path&&"function"==typeof e.path||e?.destination?.path&&"function"==typeof e.destination?.path||e?.source?.path&&"function"==typeof e.source?.path,u=e=>h(e)||g(e)||E(e),p=e=>{if(u(e)||l(e))throw new a.a({name:"InvalidStorageInput",message:"The input needs to have a path as a string value.",recoverySuggestion:"Please provide a valid path as a string value for the input."})},h=e=>"string"==typeof e.key,g=e=>"string"==typeof e.prefix,E=e=>"string"==typeof e.source?.key||"string"==typeof e.destination?.key,f=(e,t)=>{if("string"==typeof e.bucket){let n=t?.[e.bucket];return(0,i.M)(!!n,o.q.InvalidStorageBucket),{bucket:n.bucketName,region:n.region}}if("object"==typeof e.bucket)return{bucket:e.bucket.bucketName,region:e.bucket.region}}},99708:(e,t,n)=>{"use strict";n.d(t,{o:()=>R});var i=n(71776),o=n(70610),r=n(79773),a=n(59591),s=n(75318),c=n(94877);let d=(e,t)=>{let n=(0,a.y)(t),{accessKeyId:i,credentialScope:o,longDate:d,sessionToken:l}=n,u={...e.headers};u[s.zX]=e.url.host,u[s.ot]=d,l&&(u[s.wE]=l);let p={...e,headers:u},h=(0,c.d)(p,n),g=`Credential=${i}/${o}`,E=`SignedHeaders=${(0,r.Z)(u)}`,f=`Signature=${h}`;return u[s.H1]=`${s.EK} ${g}, ${E}, ${f}`,p};n(49570),n(88346);let l=e=>new Date(Date.now()+e),u=(e,t)=>Math.abs(l(t).getTime()-e)>=3e5,p=(e,t)=>u(e,t)?e-Date.now():t,h=({headers:e}={})=>e?.date??e?.Date??e?.["x-amz-date"];var g=n(72877),E=n(23752),f=n(66095),m=n(5156),y=n(87410),x=n(36696),I=n(50234);let S=new y.C("xhr-http-handler"),v=e=>({transferredBytes:e.loaded,totalBytes:e.lengthComputable?e.total:void 0}),w=(e,t)=>{let n=Error(e);return n.name=t,n},C=e=>e?e.split("\r\n").reduce((e,t)=>{let n=t.split(": "),i=n.shift(),o=n.join(": ");return e[i.toLowerCase()]=o,e},{}):{},A=e=>{let t=new FileReader;return new Promise((n,i)=>{t.onloadend=()=>{t.readyState===FileReader.DONE&&n(t.result)},t.onerror=()=>{i(t.error)},t.readAsText(e)})},T=["host"],R=(0,g.q)((e,t)=>{let{url:n,method:i,headers:o,body:r}=e,{onDownloadProgress:a,onUploadProgress:s,responseType:c,abortSignal:d}=t;return new Promise((e,t)=>{let l=new XMLHttpRequest;if(l.open(i.toUpperCase(),n.toString()),Object.entries(o).filter(([e])=>!T.includes(e)).forEach(([e,t])=>{l.setRequestHeader(e,t)}),l.responseType=c,a&&l.addEventListener("progress",e=>{a(v(e)),S.debug(e)}),s&&l.upload.addEventListener("progress",e=>{s(v(e)),S.debug(e)}),l.addEventListener("error",()=>{let e=new I.a({message:f.iE,name:f.Qd});S.error(f.iE),t(e),l=null}),l.addEventListener("abort",()=>{if(!l||d?.aborted)return;let e=w(f.S6,f.sj);S.error(f.S6),t(e),l=null}),l.addEventListener("readystatechange",()=>{l&&l.readyState===l.DONE&&setTimeout(()=>{if(!l)return;let t=C(l.getAllResponseHeaders()),{responseType:n}=l,i=l.response,o="text"===n?l.responseText:"",r={blob:()=>Promise.resolve(i),text:(0,m.n)(()=>"blob"===n?A(i):Promise.resolve(o)),json:()=>Promise.reject(Error("Parsing response to JSON is not implemented. Please use response.text() instead."))};e({statusCode:l.status,headers:t,body:"blob"===l.responseType?Object.assign(i,r):r}),l=null})}),d){let e=()=>{l&&(t(new x.k({name:f.x0,message:f.V5})),l.abort(),l=null)};d.aborted?e():d.addEventListener("abort",e)}if("function"==typeof ReadableStream&&r instanceof ReadableStream)throw Error("ReadableStream request payload is not supported.");l.send(r??null)})},[()=>e=>async function(t){if(t.headers[f.c9])return e(t);{let n=await (0,E.M)(t.body);return t.headers[f.c9]=n,e(t)}},i.L,o.b,({credentials:e,region:t,service:n,uriEscapePath:i=!0})=>{let o;return(r,a)=>async function(s){o=o??0;let c={credentials:"function"==typeof e?await e({forceRefresh:!!a?.isCredentialsExpired}):e,signingDate:l(o),signingRegion:t,signingService:n,uriEscapePath:i},u=await d(s,c),g=await r(u),E=h(g);return E&&(o=p(Date.parse(E),o)),g}}])}}]);