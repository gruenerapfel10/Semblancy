(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{12693:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>m});var n=o(95155),i=o(12115),a=o(76046),r=o(83718),s=o(19276),l=o(68996),c=o(34198),d=o(20068),u=o.n(d);o(5565);var g=o(24631),h=o(46355);function m(){let[e,t]=(0,i.useState)(""),[o,d]=(0,i.useState)(""),[m,_]=(0,i.useState)(""),[x,p]=(0,i.useState)(""),[f,v]=(0,i.useState)(!0),[C,w]=(0,i.useState)(!1),[y,S]=(0,i.useState)(""),[b,j]=(0,i.useState)(""),[N,I]=(0,i.useState)(!1),L=(0,a.useRouter)(),{checkAuthState:E,isAuthenticated:P,user:A}=(0,l.m)();(0,i.useEffect)(()=>{if(N)return;(async()=>{try{if(await E()){console.log("User already authenticated, redirecting to dashboard"),L.push("/dashboard");return}}catch(e){console.error("Error checking authentication:",e)}finally{I(!0),v(!1)}})();let e=new URLSearchParams(window.location.search),o=e.get("username");o&&t(o),e.get("signupSuccess")&&p("Account created successfully! Please log in."),e.get("confirmSuccess")&&p("Account confirmed successfully! Please log in.")},[]);let M=async t=>{t.preventDefault(),v(!0),_(""),p("");try{let t=await (0,r.J)({username:e,password:o});if(console.log("Sign in successful:",t),t.nextStep&&"DONE"!==t.nextStep.signInStep){console.log("Additional steps required:",t.nextStep),"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD"===t.nextStep.signInStep?_("You need to set a new password. Please contact an administrator."):"CONFIRM_SIGN_UP"===t.nextStep.signInStep?(_("Your account needs confirmation."),w(!0)):_("Additional authentication step required: ".concat(t.nextStep.signInStep)),v(!1);return}await E(),sessionStorage.setItem("justLoggedIn","true"),L.push("/dashboard")}catch(e){console.error("Login error:",e),"NotAuthorizedException"===e.name?e.message.includes("User is not confirmed")?(_("Your account needs confirmation."),w(!0)):e.message.includes("Incorrect username or password")?_("Incorrect username or password. Please try again."):_("Authentication failed. Please check your credentials."):"UserNotConfirmedException"===e.name?(_("Your account needs confirmation."),w(!0)):"UserNotFoundException"===e.name?_("Account not found. Please check your username or sign up."):"LimitExceededException"===e.name?_("Too many attempts. Please try again later."):"NetworkError"===e.name?_("Network error. Please check your connection and try again."):_(e.message||"An error occurred during login. Please try again."),v(!1)}},B=async t=>{t.preventDefault(),v(!0),j("");try{(await (0,s.z)({username:e,confirmationCode:y})).isSignUpComplete&&(p("Account confirmed successfully! Please log in."),w(!1),S(""))}catch(e){console.error("Confirmation error:",e),"CodeMismatchException"===e.name?j("Invalid code. Please try again."):"ExpiredCodeException"===e.name?(console.log(e),j("Code has expired. Please request a new one.")):"NetworkError"===e.name?j("Network error. Please check your connection."):j(e.message||"Error confirming account")}finally{v(!1)}};return f&&!N?(0,n.jsxs)("div",{className:u().authContainer,children:[(0,n.jsx)(g.A,{size:"xl"}),(0,n.jsx)(h.A,{height:"50px"}),(0,n.jsxs)("div",{className:u().loadingContainer,children:[(0,n.jsx)("div",{className:u().spinner}),(0,n.jsx)("p",{children:"Loading..."})]})]}):(0,n.jsxs)("div",{className:u().authContainer,children:[(0,n.jsx)(g.A,{size:"xl"}),(0,n.jsx)(h.A,{height:"50px"}),(0,n.jsxs)("div",{className:u().formCard,children:[(0,n.jsx)("h1",{className:u().title,children:"Log In"}),x&&(0,n.jsx)("div",{className:u().successMessage,children:x}),(0,n.jsxs)("form",{onSubmit:M,children:[(0,n.jsxs)("div",{className:u().formGroup,children:[(0,n.jsx)("label",{children:"Email address"}),(0,n.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0,disabled:f,placeholder:"Enter your email"})]}),(0,n.jsxs)("div",{className:u().formGroup,children:[(0,n.jsx)("label",{children:"Password"}),(0,n.jsx)("input",{type:"password",value:o,onChange:e=>d(e.target.value),required:!0,disabled:f,placeholder:"Enter your password"})]}),(0,n.jsx)("div",{className:u().forgotPassword,children:(0,n.jsx)("a",{href:"/forgot-password",children:"Forgot password?"})}),m&&(0,n.jsx)("div",{className:u().errorMessage,children:m}),(0,n.jsx)("button",{type:"submit",className:u().primaryButton,disabled:f,children:f?"Logging in...":"Log in"})]}),(0,n.jsxs)("div",{className:u().switchAuthMode,children:["Don't have an account? ",(0,n.jsx)("a",{href:"/signup",children:"Sign up"})]})]}),(0,n.jsxs)(c.A,{isOpen:C,onClose:()=>w(!1),title:"Confirm Your Account",children:[(0,n.jsx)("p",{className:u().infoText,children:"We've sent a confirmation code to your email. Please enter it below to verify your account."}),(0,n.jsxs)("form",{onSubmit:B,children:[(0,n.jsxs)("div",{className:u().formGroup,children:[(0,n.jsx)("label",{children:"Confirmation Code:"}),(0,n.jsx)("input",{value:y,onChange:e=>S(e.target.value),required:!0,disabled:f,placeholder:"Enter code from email"})]}),b&&(0,n.jsx)("div",{className:u().errorMessage,children:b}),(0,n.jsx)("button",{type:"submit",className:u().primaryButton,disabled:f,children:f?"Confirming...":"Confirm Account"}),(0,n.jsx)("button",{type:"button",className:u().secondaryButton,onClick:()=>w(!1),children:"Cancel"})]})]})]})}},17689:e=>{e.exports={logoContainer:"Logo_logoContainer__e_vYb",logoIcon:"Logo_logoIcon__R3YI4",iconImage:"Logo_iconImage__BdNQ7",logoTextContainer:"Logo_logoTextContainer__c3CMr",titleContainer:"Logo_titleContainer__BBg1T",titleImage:"Logo_titleImage__CyULh",textContainer:"Logo_textContainer__Xsaj1",textImage:"Logo_textImage__Rz6Mr",containerSmall:"Logo_containerSmall__pmHIe",iconSmall:"Logo_iconSmall__xi3_9",textContainerSmall:"Logo_textContainerSmall__AZ_TK",containerDefault:"Logo_containerDefault__dQkhM",iconDefault:"Logo_iconDefault__Qn6kc",textContainerDefault:"Logo_textContainerDefault__tX5Ad",containerLarge:"Logo_containerLarge__InIP1",iconLarge:"Logo_iconLarge__ekDFs",textContainerLarge:"Logo_textContainerLarge__f4q3g"}},19276:(e,t,o)=>{"use strict";o.d(t,{z:()=>w});var n=o(42656),i=o(62468),a=o(96778),r=o(43425),s=o(99643),l=o(69895),c=o(6929),d=o(23251),u=o(11719),g=o(83507),h=o(74267),m=o(49240),_=o(87395),x=o(83578);let p=e=>(0,g.A)(m.e,(0,_._)("ConfirmSignUp"),(0,x.T)(),{...h.C,...e});var f=o(40850),v=o(56276),C=o(19078);async function w(e){let{username:t,confirmationCode:o,options:g}=e,h=n.H.getConfig().Auth?.Cognito;(0,i.$y)(h);let{userPoolId:m,userPoolClientId:_,userPoolEndpoint:x}=h,w=g?.clientMetadata;(0,s.M)(!!t,l.P.EmptyConfirmSignUpUsername),(0,s.M)(!!o,l.P.EmptyConfirmSignUpCode);let y=(0,u.d)({username:t,userPoolId:m,userPoolClientId:_}),S=p({endpointResolver:(0,f.o)({endpointOverride:x})}),{Session:b}=await S({region:(0,c.J)(h.userPoolId),userAgentValue:(0,d.A)(a.BM.ConfirmSignUp)},{Username:t,ConfirmationCode:o,ClientMetadata:w,ForceAliasCreation:g?.forceAliasCreation,ClientId:h.userPoolClientId,UserContextData:y});return new Promise((e,o)=>{try{let o={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},n=v.z.getState();if(!n.active||n.username!==t){e(o),(0,C.xO)();return}v.z.dispatch({type:"SET_SESSION",value:b});let i=r.f3.listen("auth-internal",({payload:t})=>{"autoSignIn"===t.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),i())});r.f3.dispatch("auth-internal",{event:"confirmSignUp",data:o})}catch(e){o(e)}})}},20068:e=>{e.exports={authContainer:"login_authContainer__PGjHZ",logoContainer:"login_logoContainer__9LfB8",formCard:"login_formCard__6dizR",title:"login_title__r1aBc",formGroup:"login_formGroup__exBI3",forgotPassword:"login_forgotPassword__J4MxT",primaryButton:"login_primaryButton__bBz2_",orDivider:"login_orDivider__nwgpd",demoButton:"login_demoButton__tY_bC",switchAuthMode:"login_switchAuthMode__hXgh_",errorMessage:"login_errorMessage____0Gr",successMessage:"login_successMessage__aeDlv",secondaryButton:"login_secondaryButton__mfw19",infoText:"login_infoText__FYZDF"}},24631:(e,t,o)=>{"use strict";o.d(t,{A:()=>h});var n=o(95155);o(12115),o(48173);var i=o(5565),a=o(17689),r=o.n(a);let s={src:"/_next/static/media/prosemble-logo-v2.ff760a32.svg",height:76,width:88,blurWidth:0,blurHeight:0},l={src:"/_next/static/media/prosemble-logo-v2-white.bf561736.svg",height:84,width:97,blurWidth:0,blurHeight:0},c={src:"/_next/static/media/prosemble-logo-v2-title.2d097fad.svg",height:38,width:235,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/prosemble-logo-v2-title-white.6bac1a27.svg",height:43,width:258,blurWidth:0,blurHeight:0},u={src:"/_next/static/media/prosemble-logo-v2-text.9a115cb2.svg",height:9,width:145,blurWidth:0,blurHeight:0},g={src:"/_next/static/media/prosemble-logo-v2-text-white.a360ea86.svg",height:5,width:160,blurWidth:0,blurHeight:0},h=e=>{let{size:t="medium",invert:o=!1,showIcon:a=!0,showTitle:h=!0,showTagline:m=!0}=e,_={small:{container:{height:30,width:30},text:{height:15,width:93},tagline:{fontSize:"8px"}},medium:{container:{height:60,width:60},text:{height:30,width:160},tagline:{fontSize:"40px"}},large:{container:{height:80,width:80},text:{height:50,width:240},tagline:{fontSize:"24px"}},xl:{container:{height:90,width:90},text:{height:50,width:300},tagline:{fontSize:"32px"}},mobile:{container:{height:50,width:50},text:{height:40,width:160},tagline:{fontSize:"20px"}},auto:{container:{height:"auto",width:"auto"},text:{height:"auto",width:"auto"},tagline:{fontSize:"20px"}}},x=_[t]||_.medium;return(0,n.jsxs)("div",{className:r().logoContainer,children:[a&&(0,n.jsx)("div",{className:r().logoIcon,children:(0,n.jsx)(i.default,{src:o?l:s,alt:"Prosemble Logo Icon",width:x.container.width,height:x.container.height,priority:!0})}),(h||m)&&(0,n.jsxs)("div",{className:r().logoTextContainer,children:[h&&(0,n.jsx)("div",{className:r().titleContainer,children:(0,n.jsx)(i.default,{src:o?d:c,alt:"Prosemble",width:x.text.width,height:x.text.height,className:r().title,priority:!0})}),m&&(0,n.jsx)("div",{className:r().textContainer,children:(0,n.jsx)(i.default,{src:o?g:u,alt:"Precision science",width:x.text.width/1.5,height:x.text.height/2.5,priority:!0})})]})]})}},31065:(e,t,o)=>{Promise.resolve().then(o.bind(o,12693))},34198:(e,t,o)=>{"use strict";o.d(t,{A:()=>s});var n=o(95155),i=o(12115),a=o(62855),r=o.n(a);function s(e){let{isOpen:t,onClose:o,children:a,title:s}=e,l=(0,i.useRef)(null);return((0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&o()},n=e=>{l.current&&!l.current.contains(e.target)&&o()};return t&&(document.addEventListener("keydown",e),document.addEventListener("mousedown",n),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.removeEventListener("mousedown",n),document.body.style.overflow="auto"}},[t,o]),t)?(0,n.jsx)("div",{className:r().modalOverlay||"modal-overlay",children:(0,n.jsxs)("div",{className:r().modalContent||"modal-content",ref:l,children:[(0,n.jsxs)("div",{className:r().modalHeader||"modal-header",children:[(0,n.jsx)("h2",{children:s}),(0,n.jsx)("button",{className:r().closeButton||"close-button",onClick:o,children:"\xd7"})]}),(0,n.jsx)("div",{className:r().modalBody||"modal-body",children:a})]})}):null}},46355:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var n=o(95155);function i(e){let{height:t}=e;return(0,n.jsx)("div",{style:{height:t}})}},62855:e=>{e.exports={modalOverlay:"Modal_modalOverlay__2EqPc",modalContent:"Modal_modalContent__cPdxT",modalFadeIn:"Modal_modalFadeIn__BNQ2s",modalHeader:"Modal_modalHeader__IM_oC",closeButton:"Modal_closeButton__YjHCd",modalBody:"Modal_modalBody__XfMVE"}}},e=>{var t=t=>e(e.s=t);e.O(0,[6150,9845,6530,5565,5,8441,6587,7358],()=>t(31065)),_N_E=e.O()}]);