(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6737],{16472:(e,a,t)=>{"use strict";t.d(a,{default:()=>c});var s=t(95155),n=t(12115),l=t(48173),o=t.n(l),i=t(46878),r=t.n(i);function c(e){let{children:a}=e,[t,l]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:r().layout,children:[(0,s.jsxs)("nav",{className:r().nav,children:[(0,s.jsxs)("div",{className:r().navContent,children:[(0,s.jsx)(o(),{href:"/dashboard",className:r().logoLink,children:(0,s.jsx)("div",{className:r().logo,children:"Prosemble"})}),(0,s.jsxs)("div",{className:r().navLinks,children:[(0,s.jsx)(o(),{href:"/dashboard",className:r().navLink,children:"Dashboard"}),(0,s.jsx)(o(),{href:"/changelog",className:"".concat(r().navLink," ").concat(r().active),children:"Changelog"})]}),(0,s.jsx)("div",{className:r().mobileMenu,children:(0,s.jsx)("button",{className:r().menuButton,onClick:()=>l(!t),"aria-label":"Toggle menu",children:(0,s.jsxs)("div",{className:"".concat(r().menuIcon," ").concat(t?r().open:""),children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{})]})})})]}),t&&(0,s.jsxs)("div",{className:r().mobileNav,children:[(0,s.jsx)(o(),{href:"/dashboard",className:r().mobileNavLink,onClick:()=>l(!1),children:"Dashboard"}),(0,s.jsx)(o(),{href:"/changelog",className:"".concat(r().mobileNavLink," ").concat(r().active),onClick:()=>l(!1),children:"Changelog"})]})]}),(0,s.jsx)("main",{className:r().main,children:a})]})}},20370:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var s=t(95155),n=t(12115),l=t(76046),o=t(48173),i=t.n(o),r=t(5565),c=t(68996),d=t(1649),_=t(21247),u=t(35369),h=t.n(u);function g(e){let{postId:a}=e,t=(0,l.useRouter)(),{isAuthenticated:o,user:u,identityId:g,getFileUrl:m,listFiles:p,deleteFile:x,uploadFile:N}=(0,c.m)(),[b,j]=(0,n.useState)(null),[D,v]=(0,n.useState)(!0),[f,P]=(0,n.useState)(null),[L,y]=(0,n.useState)(!1),[C,B]=(0,n.useState)([]),[k,w]=(0,n.useState)(null);(0,n.useEffect)(()=>{a&&(async()=>{v(!0),P(null);try{let e=(await p("changelog/")).filter(e=>e.key.includes("/".concat(a,".json")));if(0===e.length)throw Error("Post not found");let t=await m(e[0].key),s=await fetch(t);if(!s.ok)throw Error("Failed to fetch post data");let n=await s.json();if(j(n),n.images&&n.images.length>0){let e=await Promise.all(n.images.map(e=>m(e)));B(e),e.length>0&&w(e[0])}}catch(e){console.error("Error loading post:",e),P("Failed to load post. Please try again.")}finally{v(!1)}})()},[a,m,p]);let I=async()=>{if(!L&&b&&"problem"===b.type){y(!0);try{let e={...b,status:"open"===b.status?"fixed":"open",updatedAt:new Date().toISOString(),updatedBy:u.username};await N(new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),b.fileKey),j(e),console.log("Post ".concat(b.id," status updated to ").concat(e.status))}catch(e){console.error("Error updating post status:",e),alert("Failed to update post status. Please try again.")}finally{y(!1)}}},S=async()=>{if(!L&&b&&confirm("Are you sure you want to delete this post? This action cannot be undone.")){y(!0);try{if(await x(b.fileKey),b.images&&b.images.length>0)for(let e of b.images)await x(e);t.push("/changelog")}catch(e){console.error("Error deleting post:",e),alert("Failed to delete post. Please try again."),y(!1)}}},E=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=e=>{let a=new Date(e);return(0,d.m)(a,{addSuffix:!0})};if(D)return(0,s.jsxs)("div",{className:h().loadingContainer,children:[(0,s.jsx)("div",{className:h().spinner}),(0,s.jsx)("p",{children:"Loading post..."})]});if(f)return(0,s.jsxs)("div",{className:h().errorContainer,children:[(0,s.jsx)("p",{className:h().errorMessage,children:f}),(0,s.jsx)(i(),{href:"/changelog",className:h().backButton,children:"Back to Changelog"})]});if(!b)return(0,s.jsxs)("div",{className:h().errorContainer,children:[(0,s.jsx)("p",{className:h().errorMessage,children:"Post not found"}),(0,s.jsx)(i(),{href:"/changelog",className:h().backButton,children:"Back to Changelog"})]});let A=(e=>{switch(e){case"changelog":return{className:h().changelogBadge,label:"Changelog"};case"problem":return{className:h().problemBadge,label:"Problem"};default:return{className:h().defaultBadge,label:"Post"}}})(b.type),F="problem"===b.type?(e=>{switch(e){case"open":return{className:h().openBadge,label:"Open"};case"fixed":return{className:h().fixedBadge,label:"Fixed"};default:return{className:h().defaultBadge,label:e}}})(b.status):null;return(0,s.jsxs)("div",{className:h().postDetailContainer,children:[(0,s.jsxs)("div",{className:h().postDetailHeader,children:[(0,s.jsx)(i(),{href:"/changelog",className:h().backLink,children:"← Back to Changelog"}),o&&(0,s.jsxs)("div",{className:h().actions,children:["problem"===b.type&&(0,s.jsx)("button",{onClick:I,className:"".concat(h().actionButton," ").concat("open"===b.status?h().fixButton:h().reopenButton),disabled:L,children:L?(0,s.jsx)("span",{className:h().buttonSpinner}):"open"===b.status?"Mark as Fixed":"Reopen Issue"}),(0,s.jsx)(i(),{href:"/changelog/edit?id=".concat(b.id),className:h().editButton,children:"Edit"}),(0,s.jsx)("button",{onClick:S,className:h().deleteButton,disabled:L,children:L?(0,s.jsx)("span",{className:h().buttonSpinner}):"Delete"})]})]}),(0,s.jsxs)("div",{className:h().postDetailContent,children:[(0,s.jsxs)("div",{className:h().postMeta,children:[(0,s.jsxs)("div",{className:h().badges,children:[(0,s.jsx)("span",{className:A.className,children:A.label}),F&&(0,s.jsx)("span",{className:F.className,children:F.label}),b.version&&(0,s.jsxs)("span",{className:h().versionBadge,children:["v",b.version]})]}),(0,s.jsxs)("div",{className:h().dateMeta,children:[(0,s.jsx)("span",{className:h().dateLabel,children:"Posted:"}),(0,s.jsx)("span",{className:h().dateValue,title:E(b.createdAt),children:T(b.createdAt)}),b.updatedAt&&b.updatedAt!==b.createdAt&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:h().dateLabel,children:"Updated:"}),(0,s.jsx)("span",{className:h().dateValue,title:E(b.updatedAt),children:T(b.updatedAt)})]})]})]}),(0,s.jsx)("h1",{className:h().postTitle,children:b.title}),(0,s.jsxs)("div",{className:h().authorInfo,children:[(0,s.jsx)("span",{className:h().authorLabel,children:"Posted by"}),(0,s.jsx)("span",{className:h().authorName,children:b.author})]}),C.length>0&&(0,s.jsxs)("div",{className:h().imagesContainer,children:[(0,s.jsx)("div",{className:h().mainImageContainer,children:(0,s.jsx)(r.default,{src:k,alt:b.title,width:800,height:500,className:h().mainImage})}),C.length>1&&(0,s.jsx)("div",{className:h().imageThumbnails,children:C.map((e,a)=>(0,s.jsx)("div",{className:"".concat(h().thumbnail," ").concat(e===k?h().selectedThumbnail:""),onClick:()=>w(e),children:(0,s.jsx)(r.default,{src:e,alt:"Image ".concat(a+1),width:100,height:100,className:h().thumbnailImage})},a))})]}),(0,s.jsx)("div",{className:h().markdownContent,children:(0,s.jsx)(_.oz,{children:b.content})}),b.tags&&b.tags.length>0&&(0,s.jsx)("div",{className:h().postTags,children:b.tags.map(e=>(0,s.jsxs)(i(),{href:"/changelog?tag=".concat(e),className:h().postTag,children:["#",e]},e))}),(0,s.jsx)("div",{className:h().postFooter,children:(0,s.jsxs)("div",{className:h().postDates,children:[(0,s.jsxs)("div",{className:h().postDate,children:[(0,s.jsx)("span",{className:h().dateLabel,children:"Posted:"}),(0,s.jsx)("span",{className:h().dateValue,children:E(b.createdAt)})]}),b.updatedAt&&b.updatedAt!==b.createdAt&&(0,s.jsxs)("div",{className:h().postDate,children:[(0,s.jsx)("span",{className:h().dateLabel,children:"Last updated:"}),(0,s.jsx)("span",{className:h().dateValue,children:E(b.updatedAt)}),b.updatedBy&&(0,s.jsxs)("span",{className:h().updatedBy,children:["by ",b.updatedBy]})]})]})})]})]})}var m=t(16472);function p(){let e=(0,l.useSearchParams)().get("id");return(0,s.jsx)(g,{postId:e})}function x(){return(0,s.jsx)(m.default,{children:(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"2rem"},children:(0,s.jsx)("p",{children:"Loading post..."})}),children:(0,s.jsx)(p,{})})})}},35369:e=>{e.exports={postDetailContainer:"PostDetail_postDetailContainer__1oGsS",postDetailHeader:"PostDetail_postDetailHeader__lFzw3",backLink:"PostDetail_backLink__Njv8z",actions:"PostDetail_actions___rpdk",actionButton:"PostDetail_actionButton__tkhFE",editButton:"PostDetail_editButton__NDddf",deleteButton:"PostDetail_deleteButton__DEWxx",fixButton:"PostDetail_fixButton__BCGQM",reopenButton:"PostDetail_reopenButton__OXtR_",buttonSpinner:"PostDetail_buttonSpinner__3DWpB",spin:"PostDetail_spin__n1E9z",postDetailContent:"PostDetail_postDetailContent__P8Snx",postMeta:"PostDetail_postMeta__9IQ3E",badges:"PostDetail_badges__3xeJq",changelogBadge:"PostDetail_changelogBadge__DjDZb",problemBadge:"PostDetail_problemBadge__yRbWQ",openBadge:"PostDetail_openBadge__rE_Wq",fixedBadge:"PostDetail_fixedBadge__kTPg6",versionBadge:"PostDetail_versionBadge__Vr4Op",defaultBadge:"PostDetail_defaultBadge__zo6fL",dateMeta:"PostDetail_dateMeta__FPYFg",dateLabel:"PostDetail_dateLabel__wsfcb",dateValue:"PostDetail_dateValue__PsksE",postTitle:"PostDetail_postTitle__Jm8SB",authorInfo:"PostDetail_authorInfo__6XEPy",authorLabel:"PostDetail_authorLabel__pw6NN",authorName:"PostDetail_authorName__VooHV",imagesContainer:"PostDetail_imagesContainer__7eUvh",mainImageContainer:"PostDetail_mainImageContainer__t4Ipr",mainImage:"PostDetail_mainImage__d9420",imageThumbnails:"PostDetail_imageThumbnails__ASVYj",thumbnail:"PostDetail_thumbnail__ZDMU4",selectedThumbnail:"PostDetail_selectedThumbnail___oBRA",thumbnailImage:"PostDetail_thumbnailImage__pxdh4",markdownContent:"PostDetail_markdownContent__ptkt7",postTags:"PostDetail_postTags__8Iv9X",postTag:"PostDetail_postTag__3blLW",postFooter:"PostDetail_postFooter__rAT27",postDates:"PostDetail_postDates__PlWR1",postDate:"PostDetail_postDate__1qlsy",updatedBy:"PostDetail_updatedBy__FRTJK",loadingContainer:"PostDetail_loadingContainer__WF8x8",errorContainer:"PostDetail_errorContainer__40urg",spinner:"PostDetail_spinner__9Jcag",errorMessage:"PostDetail_errorMessage__QO_RW",backButton:"PostDetail_backButton__2Iot7"}},46878:e=>{e.exports={layout:"ChangeLogLayout_layout__vOA0O",nav:"ChangeLogLayout_nav__EHQtv",navContent:"ChangeLogLayout_navContent__EI2Cq",logoLink:"ChangeLogLayout_logoLink___rUEt",logo:"ChangeLogLayout_logo__jgF8E",navLinks:"ChangeLogLayout_navLinks__TnPe8",navLink:"ChangeLogLayout_navLink__Vy3Xy",active:"ChangeLogLayout_active__eBKbP",mobileMenu:"ChangeLogLayout_mobileMenu__2vPte",menuButton:"ChangeLogLayout_menuButton__xKq9n",menuIcon:"ChangeLogLayout_menuIcon__9EQfm",open:"ChangeLogLayout_open__jUMKZ",mobileNav:"ChangeLogLayout_mobileNav___6C8y",mobileNavLink:"ChangeLogLayout_mobileNavLink__7A4JA",main:"ChangeLogLayout_main__d8QTW"}},74220:(e,a,t)=>{Promise.resolve().then(t.bind(t,20370))}},e=>{var a=a=>e(e.s=a);e.O(0,[1214,7913,9845,6530,5565,5615,5,8441,6587,7358],()=>a(74220)),_N_E=e.O()}]);