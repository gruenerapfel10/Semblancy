(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1679],{16472:(e,a,t)=>{"use strict";t.d(a,{default:()=>r});var s=t(95155),n=t(12115),l=t(48173),o=t.n(l),i=t(46878),c=t.n(i);function r(e){let{children:a}=e,[t,l]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:c().layout,children:[(0,s.jsxs)("nav",{className:c().nav,children:[(0,s.jsxs)("div",{className:c().navContent,children:[(0,s.jsx)(o(),{href:"/dashboard",className:c().logoLink,children:(0,s.jsx)("div",{className:c().logo,children:"Prosemble"})}),(0,s.jsxs)("div",{className:c().navLinks,children:[(0,s.jsx)(o(),{href:"/dashboard",className:c().navLink,children:"Dashboard"}),(0,s.jsx)(o(),{href:"/changelog",className:"".concat(c().navLink," ").concat(c().active),children:"Changelog"})]}),(0,s.jsx)("div",{className:c().mobileMenu,children:(0,s.jsx)("button",{className:c().menuButton,onClick:()=>l(!t),"aria-label":"Toggle menu",children:(0,s.jsxs)("div",{className:"".concat(c().menuIcon," ").concat(t?c().open:""),children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{})]})})})]}),t&&(0,s.jsxs)("div",{className:c().mobileNav,children:[(0,s.jsx)(o(),{href:"/dashboard",className:c().mobileNavLink,onClick:()=>l(!1),children:"Dashboard"}),(0,s.jsx)(o(),{href:"/changelog",className:"".concat(c().mobileNavLink," ").concat(c().active),onClick:()=>l(!1),children:"Changelog"})]})]}),(0,s.jsx)("main",{className:c().main,children:a})]})}},46878:e=>{e.exports={layout:"ChangeLogLayout_layout__vOA0O",nav:"ChangeLogLayout_nav__EHQtv",navContent:"ChangeLogLayout_navContent__EI2Cq",logoLink:"ChangeLogLayout_logoLink___rUEt",logo:"ChangeLogLayout_logo__jgF8E",navLinks:"ChangeLogLayout_navLinks__TnPe8",navLink:"ChangeLogLayout_navLink__Vy3Xy",active:"ChangeLogLayout_active__eBKbP",mobileMenu:"ChangeLogLayout_mobileMenu__2vPte",menuButton:"ChangeLogLayout_menuButton__xKq9n",menuIcon:"ChangeLogLayout_menuIcon__9EQfm",open:"ChangeLogLayout_open__jUMKZ",mobileNav:"ChangeLogLayout_mobileNav___6C8y",mobileNavLink:"ChangeLogLayout_mobileNavLink__7A4JA",main:"ChangeLogLayout_main__d8QTW"}},78843:e=>{e.exports={changelogContainer:"changelog-feed_changelogContainer__knWD7",header:"changelog-feed_header__ktQKQ",headerContent:"changelog-feed_headerContent___N5XM",title:"changelog-feed_title__3YSPR",subtitle:"changelog-feed_subtitle__vPNIS",content:"changelog-feed_content__k2EWZ",sidebar:"changelog-feed_sidebar__ryE_j",feedContent:"changelog-feed_feedContent__norEI",search:"changelog-feed_search__rmI8q",searchInput:"changelog-feed_searchInput__YVxX_",filters:"changelog-feed_filters__Qpth1",filterGroup:"changelog-feed_filterGroup__petwd",filterLabel:"changelog-feed_filterLabel___e4jn",filterSelect:"changelog-feed_filterSelect__D8pL_",clearFilters:"changelog-feed_clearFilters__fCKGv",tagsContainer:"changelog-feed_tagsContainer__lzIzh",tagsTitle:"changelog-feed_tagsTitle__RSlL4",tagsList:"changelog-feed_tagsList__7x8wX",tagButton:"changelog-feed_tagButton__bf9pd",activeTag:"changelog-feed_activeTag__qF_ht",actions:"changelog-feed_actions__v8AcD",newPostButton:"changelog-feed_newPostButton__qrcAi",loadingContainer:"changelog-feed_loadingContainer__WZA3d",errorContainer:"changelog-feed_errorContainer__I_0yU",noResults:"changelog-feed_noResults__VQf6h",spinner:"changelog-feed_spinner__YRwLz",spin:"changelog-feed_spin__3Lz_D",errorMessage:"changelog-feed_errorMessage__J3PJI",retryButton:"changelog-feed_retryButton__CgBFK",postsList:"changelog-feed_postsList__4MTPj",postCard:"changelog-feed_postCard__f9CKs",postHeader:"changelog-feed_postHeader__VLG4s",postMeta:"changelog-feed_postMeta__UTQuk",badges:"changelog-feed_badges__Dikij",changelogBadge:"changelog-feed_changelogBadge__AEJOy",problemBadge:"changelog-feed_problemBadge__XLulQ",openBadge:"changelog-feed_openBadge__pkVGJ",fixedBadge:"changelog-feed_fixedBadge__cmbCd",versionBadge:"changelog-feed_versionBadge__jHwfJ",defaultBadge:"changelog-feed_defaultBadge__mjycg",postDate:"changelog-feed_postDate__mavlM",postActions:"changelog-feed_postActions__YtQcb",actionButton:"changelog-feed_actionButton__G780E",editButton:"changelog-feed_editButton__eW8Oh",deleteButton:"changelog-feed_deleteButton__b6BkR",fixButton:"changelog-feed_fixButton__vaE_h",reopenButton:"changelog-feed_reopenButton__JshZq",buttonSpinner:"changelog-feed_buttonSpinner__Zw8XA",postTitle:"changelog-feed_postTitle__hEbuK",postTitleLink:"changelog-feed_postTitleLink__Ev3Ml",postContent:"changelog-feed_postContent__gPiRR",markdown:"changelog-feed_markdown__7ZWEC",readMore:"changelog-feed_readMore__5luYB",postImages:"changelog-feed_postImages__HzE6P",imagePreview:"changelog-feed_imagePreview__jdPZi",previewImage:"changelog-feed_previewImage__YuJNx",moreImages:"changelog-feed_moreImages__ZewHQ",postTags:"changelog-feed_postTags__tgrHp",postTag:"changelog-feed_postTag__YHM4G",postFooter:"changelog-feed_postFooter__20Z_t",postAuthor:"changelog-feed_postAuthor__HUJuY",authorName:"changelog-feed_authorName__rHu4L",viewDetails:"changelog-feed_viewDetails__rIy1D"}},83077:(e,a,t)=>{"use strict";t.d(a,{default:()=>u});var s=t(95155),n=t(12115),l=t(76046),o=t(48173),i=t.n(o),c=t(5565),r=t(68996),d=t(1649),g=t(21247),h=t(78843),_=t.n(h);function u(){let e=(0,l.useRouter)(),a=(0,l.useSearchParams)(),{isAuthenticated:t,user:o,identityId:h,getFileUrl:u,listFiles:m,deleteFile:p,uploadFile:f}=(0,r.m)(),[v,x]=(0,n.useState)([]),[N,j]=(0,n.useState)(!0),[b,C]=(0,n.useState)(null),[y,L]=(0,n.useState)("all"),[w,B]=(0,n.useState)("all"),[k,S]=(0,n.useState)(""),[P,T]=(0,n.useState)(""),[E,I]=(0,n.useState)("newest"),[A,D]=(0,n.useState)([]),[M,F]=(0,n.useState)({});(0,n.useEffect)(()=>{let e=a.get("type")||"all",t=a.get("status")||"all",s=a.get("query")||"",n=a.get("tag")||"",l=a.get("sort")||"newest";L(e),B(t),S(s),T(n),I(l)},[a]),(0,n.useEffect)(()=>{R()},[t,h]);let R=async()=>{j(!0),C(null);try{if(!t||!h)throw Error("Authentication required");let e=(await m("changelog/")).filter(e=>e.key.endsWith(".json")),a=(await Promise.all(e.map(async e=>{try{let a=await u(e.key),t=await fetch(a);if(!t.ok)throw Error("Failed to fetch ".concat(e.key));let s=await t.json();return s.fileKey=e.key,s.images&&s.images.length>0&&(s.imageUrls=await Promise.all(s.images.map(e=>u(e)))),s}catch(a){return console.error("Error loading ".concat(e.key,":"),a),null}}))).filter(e=>null!==e),s=U(a,E),n=[...new Set(s.flatMap(e=>e.tags||[]))].sort();x(s),D(n)}catch(e){console.error("Error fetching posts:",e),C("Failed to load posts. Please try again later.")}finally{j(!1)}},U=(e,a)=>[...e].sort((e,t)=>{let s=new Date(e.createdAt),n=new Date(t.createdAt);return"newest"===a?n-s:s-n}),H=async e=>{if(!M[e.id]){F(a=>({...a,[e.id]:!0}));try{let a={...e,status:"open"===e.status?"fixed":"open",updatedAt:new Date().toISOString(),updatedBy:o.username};await f(new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),e.fileKey),x(t=>t.map(t=>t.id===e.id?a:t)),console.log("Post ".concat(e.id," status updated to ").concat(a.status))}catch(e){console.error("Error updating post status:",e),alert("Failed to update post status. Please try again.")}finally{F(a=>({...a,[e.id]:!1}))}}},K=async e=>{if(!M[e.id]&&confirm("Are you sure you want to delete this post? This action cannot be undone.")){F(a=>({...a,[e.id]:!0}));try{if(await p(e.fileKey),e.images&&e.images.length>0)for(let a of e.images)await p(a);x(a=>a.filter(a=>a.id!==e.id)),console.log("Post ".concat(e.id," deleted successfully"))}catch(e){console.error("Error deleting post:",e),alert("Failed to delete post. Please try again.")}finally{F(a=>({...a,[e.id]:!1}))}}},O=(t,s)=>{let n=new URLSearchParams(Array.from(a.entries()));s&&"all"!==s?n.set(t,s):n.delete(t);let l=n.toString();e.push("/changelog".concat(l?"?".concat(l):""))},Q=e=>{T(e===P?"":e),O("tag",e===P?"":e)},G=e=>{switch(e){case"changelog":return{className:_().changelogBadge,label:"Changelog"};case"problem":return{className:_().problemBadge,label:"Problem"};default:return{className:_().defaultBadge,label:"Post"}}},J=e=>{switch(e){case"open":return{className:_().openBadge,label:"Open"};case"fixed":return{className:_().fixedBadge,label:"Fixed"};default:return{className:_().defaultBadge,label:e}}},q=e=>{let a=new Date(e);return(0,d.m)(a,{addSuffix:!0})},Z=v.filter(e=>{if("all"!==y&&e.type!==y||"all"!==w&&"problem"===e.type&&e.status!==w||P&&(!e.tags||!e.tags.includes(P)))return!1;if(k){let a=k.toLowerCase();return e.title.toLowerCase().includes(a)||e.content.toLowerCase().includes(a)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(a))||e.version&&e.version.toLowerCase().includes(a)}return!0});return(0,s.jsxs)("div",{className:_().changelogContainer,children:[(0,s.jsx)("header",{className:_().header,children:(0,s.jsxs)("div",{className:_().headerContent,children:[(0,s.jsx)("h1",{className:_().title,children:"Changelog & Issues"}),(0,s.jsx)("p",{className:_().subtitle,children:"Track updates, improvements, and reported issues"})]})}),(0,s.jsxs)("div",{className:_().content,children:[(0,s.jsxs)("aside",{className:_().sidebar,children:[(0,s.jsx)("div",{className:_().search,children:(0,s.jsx)("input",{type:"text",placeholder:"Search...",value:k,onChange:e=>{let a=e.target.value;S(a),O("query",a)},className:_().searchInput})}),(0,s.jsxs)("div",{className:_().filters,children:[(0,s.jsxs)("div",{className:_().filterGroup,children:[(0,s.jsx)("label",{className:_().filterLabel,children:"Type"}),(0,s.jsxs)("select",{value:y,onChange:e=>{let a=e.target.value;L(a),O("type",a)},className:_().filterSelect,children:[(0,s.jsx)("option",{value:"all",children:"All Types"}),(0,s.jsx)("option",{value:"changelog",children:"Changelog"}),(0,s.jsx)("option",{value:"problem",children:"Problem"})]})]}),("all"===y||"problem"===y)&&(0,s.jsxs)("div",{className:_().filterGroup,children:[(0,s.jsx)("label",{className:_().filterLabel,children:"Status"}),(0,s.jsxs)("select",{value:w,onChange:e=>{let a=e.target.value;B(a),O("status",a)},className:_().filterSelect,children:[(0,s.jsx)("option",{value:"all",children:"All Statuses"}),(0,s.jsx)("option",{value:"open",children:"Open"}),(0,s.jsx)("option",{value:"fixed",children:"Fixed"})]})]}),(0,s.jsxs)("div",{className:_().filterGroup,children:[(0,s.jsx)("label",{className:_().filterLabel,children:"Sort"}),(0,s.jsxs)("select",{value:E,onChange:e=>{let a=e.target.value;I(a),O("sort",a),x(U(v,a))},className:_().filterSelect,children:[(0,s.jsx)("option",{value:"newest",children:"Newest First"}),(0,s.jsx)("option",{value:"oldest",children:"Oldest First"})]})]}),("all"!==y||"all"!==w||k||P)&&(0,s.jsx)("button",{onClick:()=>{S(""),L("all"),B("all"),I("newest"),T(""),e.push("/changelog")},className:_().clearFilters,children:"Clear Filters"})]}),A.length>0&&(0,s.jsxs)("div",{className:_().tagsContainer,children:[(0,s.jsx)("h3",{className:_().tagsTitle,children:"Tags"}),(0,s.jsx)("div",{className:_().tagsList,children:A.map(e=>(0,s.jsx)("button",{onClick:()=>Q(e),className:"".concat(_().tagButton," ").concat(e===P?_().activeTag:""),children:e},e))})]}),t&&(0,s.jsx)("div",{className:_().actions,children:(0,s.jsx)(i(),{href:"/changelog/new",className:_().newPostButton,children:"Create New Post"})})]}),(0,s.jsx)("main",{className:_().feedContent,children:N?(0,s.jsxs)("div",{className:_().loadingContainer,children:[(0,s.jsx)("div",{className:_().spinner}),(0,s.jsx)("p",{children:"Loading posts..."})]}):b?(0,s.jsxs)("div",{className:_().errorContainer,children:[(0,s.jsx)("p",{className:_().errorMessage,children:b}),(0,s.jsx)("button",{onClick:R,className:_().retryButton,children:"Retry"})]}):0===Z.length?(0,s.jsxs)("div",{className:_().noResults,children:[(0,s.jsx)("h3",{children:"No posts found"}),(0,s.jsx)("p",{children:"Try adjusting your filters or create a new post"})]}):(0,s.jsx)("div",{className:_().postsList,children:Z.map(e=>{let a=G(e.type),n="problem"===e.type?J(e.status):null;return(0,s.jsxs)("div",{className:_().postCard,children:[(0,s.jsxs)("div",{className:_().postHeader,children:[(0,s.jsxs)("div",{className:_().postMeta,children:[(0,s.jsxs)("div",{className:_().badges,children:[(0,s.jsx)("span",{className:a.className,children:a.label}),n&&(0,s.jsx)("span",{className:n.className,children:n.label}),e.version&&(0,s.jsxs)("span",{className:_().versionBadge,children:["v",e.version]})]}),(0,s.jsx)("span",{className:_().postDate,children:q(e.createdAt)})]}),t&&(0,s.jsxs)("div",{className:_().postActions,children:["problem"===e.type&&(0,s.jsx)("button",{onClick:()=>H(e),className:"".concat(_().actionButton," ").concat("open"===e.status?_().fixButton:_().reopenButton),disabled:M[e.id],children:M[e.id]?(0,s.jsx)("span",{className:_().buttonSpinner}):"open"===e.status?"Mark Fixed":"Reopen"}),(0,s.jsx)(i(),{href:"/changelog/edit?id=".concat(e.id),className:_().editButton,children:"Edit"}),(0,s.jsx)("button",{onClick:()=>K(e),className:_().deleteButton,disabled:M[e.id],children:M[e.id]?(0,s.jsx)("span",{className:_().buttonSpinner}):"Delete"})]})]}),(0,s.jsx)("h2",{className:_().postTitle,children:(0,s.jsx)(i(),{href:"/changelog/view?id=".concat(e.id),className:_().postTitleLink,children:e.title})}),(0,s.jsxs)("div",{className:_().postContent,children:[(0,s.jsx)(g.oz,{className:_().markdown,children:e.content.length>300?"".concat(e.content.substring(0,300),"..."):e.content}),e.content.length>300&&(0,s.jsx)(i(),{href:"/changelog/".concat(e.id),className:_().readMore,children:"Read more"})]}),e.imageUrls&&e.imageUrls.length>0&&(0,s.jsxs)("div",{className:_().postImages,children:[e.imageUrls.slice(0,3).map((a,t)=>(0,s.jsx)("div",{className:_().imagePreview,children:(0,s.jsx)(c.default,{src:a,alt:"Image ".concat(t+1," for ").concat(e.title),width:100,height:100,className:_().previewImage})},t)),e.imageUrls.length>3&&(0,s.jsxs)("div",{className:_().moreImages,children:["+",e.imageUrls.length-3," more"]})]}),e.tags&&e.tags.length>0&&(0,s.jsx)("div",{className:_().postTags,children:e.tags.map(e=>(0,s.jsxs)("span",{onClick:()=>Q(e),className:_().postTag,children:["#",e]},e))}),(0,s.jsxs)("div",{className:_().postFooter,children:[(0,s.jsxs)("div",{className:_().postAuthor,children:["Posted by"," ",(0,s.jsx)("span",{className:_().authorName,children:e.author})]}),(0,s.jsx)(i(),{href:"/changelog/view?id=".concat(e.id),className:_().viewDetails,children:"View Details"})]})]},e.id)})})})]})]})}},91823:(e,a,t)=>{Promise.resolve().then(t.bind(t,83077)),Promise.resolve().then(t.bind(t,16472))}},e=>{var a=a=>e(e.s=a);e.O(0,[9024,7913,9845,6530,5565,5615,5,8441,6587,7358],()=>a(91823)),_N_E=e.O()}]);