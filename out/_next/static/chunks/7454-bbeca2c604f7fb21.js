"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7454],{19276:(e,t,n)=>{n.d(t,{z:()=>h});var i=n(42656),a=n(62468),r=n(96778),o=n(43425),s=n(99643),l=n(69895),p=n(6929),u=n(23251),c=n(11719),d=n(83507),m=n(74267),S=n(49240),g=n(87395),U=n(83578);let f=e=>(0,d.A)(S.e,(0,g._)("ConfirmSignUp"),(0,U.T)(),{...m.C,...e});var y=n(40850),C=n(56276),v=n(19078);async function h(e){let{username:t,confirmationCode:n,options:d}=e,m=i.H.getConfig().Auth?.Cognito;(0,a.$y)(m);let{userPoolId:S,userPoolClientId:g,userPoolEndpoint:U}=m,h=d?.clientMetadata;(0,s.M)(!!t,l.P.EmptyConfirmSignUpUsername),(0,s.M)(!!n,l.P.EmptyConfirmSignUpCode);let I=(0,c.d)({username:t,userPoolId:S,userPoolClientId:g}),w=f({endpointResolver:(0,y.o)({endpointOverride:U})}),{Session:_}=await w({region:(0,p.J)(m.userPoolId),userAgentValue:(0,u.A)(r.BM.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:h,ForceAliasCreation:d?.forceAliasCreation,ClientId:m.userPoolClientId,UserContextData:I});return new Promise((e,n)=>{try{let n={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}},i=C.z.getState();if(!i.active||i.username!==t){e(n),(0,v.xO)();return}C.z.dispatch({type:"SET_SESSION",value:_});let a=o.f3.listen("auth-internal",({payload:t})=>{"autoSignIn"===t.event&&(e({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),a())});o.f3.dispatch("auth-internal",{event:"confirmSignUp",data:n})}catch(e){n(e)}})}},60875:(e,t,n)=>{n.d(t,{H:()=>R});var i=n(42656),a=n(62468),r=n(96778),o=n(99643),s=n(69895),l=n(6929);function p(e){return Object.entries(e).map(([e,t])=>({Name:e,Value:t}))}var u=n(43425),c=n(83718),d=n(35346),m=n(19078),S=n(82321),g=n(2035);function U(e,t){let n;return i=>{n||e(...i),clearTimeout(n),n=setTimeout(()=>{n=void 0},t)}}let f=U(function(e,t,n){let i=Date.now(),a=setInterval(async()=>{if(Date.now()-i>18e4)clearInterval(a),n(new d.l({name:S.A0,message:"The account was not confirmed on time.",recoverySuggestion:"Try to verify your account by clicking the link sent your email or phone and then login manually."})),(0,m.xO)();else try{let n=await (0,c.J)(e);"CONFIRM_SIGN_UP"!==n.nextStep.signInStep&&(t(n),clearInterval(a),(0,m.xO)())}catch(e){clearInterval(a),n(e),(0,m.xO)()}},5e3)},300),y=U(C,300);async function C(e,t,n){try{let n=e?.options?.authFlowType==="USER_AUTH"?await (0,g.k)(e):await (0,c.J)(e);t(n),(0,m.xO)()}catch(e){n(e),(0,m.xO)()}}function v(e){return async()=>new Promise((t,n)=>{y([e,t,n])})}var h=n(11719),I=n(23251),w=n(83507),_=n(27814),A=n(73140),E=n(99529),O=n(65600),T=n(87395),N=n(49240),M=n(74267);let P=()=>async e=>{if(e.statusCode>=300){let t=await (0,_.F)(e);if((0,E.e)(t),t.name===O.AU.InvalidParameterException&&/'password'/.test(t.message)&&/Member must not be null/.test(t.message)){let e=s.P.EmptySignUpPassword,{message:t,recoverySuggestion:n}=A.ut[e];throw new d.l({name:e,message:t,recoverySuggestion:n})}throw new d.l({name:t.name,message:t.message})}return(0,_.Y)(e)},b=e=>(0,w.A)(N.e,(0,T._)("SignUp"),P(),{...M.C,...e});var x=n(40850),D=n(56276);async function R(e){let{username:t,password:n,options:c}=e,d=i.H.getConfig().Auth?.Cognito,S=d?.signUpVerificationMethod??"code",{clientMetadata:g,validationData:U,autoSignIn:y}=e.options??{};(0,a.$y)(d),(0,o.M)(!!t,s.P.EmptySignUpUsername);let C="boolean"!=typeof y?y:void 0,w={username:t,options:C};C?.authFlowType!=="CUSTOM_WITHOUT_SRP"&&(w.password=n);let{userPoolId:_,userPoolClientId:A,userPoolEndpoint:E}=d,O=b({endpointResolver:(0,x.o)({endpointOverride:E})}),T={Username:t,Password:void 0,UserAttributes:c?.userAttributes&&p(c?.userAttributes),ClientMetadata:g,ValidationData:U&&p(U),ClientId:A,UserContextData:(0,h.d)({username:t,userPoolId:_,userPoolClientId:A})};n&&(T.Password=n);let{UserSub:N,CodeDeliveryDetails:M,UserConfirmed:P,Session:R}=await O({region:(0,l.J)(_),userAgentValue:(0,I.A)(r.BM.SignUp)},T);(C||!0===y)&&(D.z.dispatch({type:"START"}),D.z.dispatch({type:"SET_USERNAME",value:t}),D.z.dispatch({type:"SET_SESSION",value:R}));let k={destination:M?.Destination,deliveryMedium:M?.DeliveryMedium,attributeName:M?.AttributeName},V=D.z.getState().active;if(P)return V?((0,m.K$)(v(w)),{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:N}):{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:N};if(V){if("link"===S)return(0,m.K$)(async()=>new Promise((e,t)=>{f([w,e,t])})),{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:k},userId:N};!function(e){let t=u.f3.listen("auth-internal",async({payload:n})=>{if("confirmSignUp"===n.event){let i=n.data;i?.isSignUpComplete&&(u.f3.dispatch("auth-internal",{event:"autoSignIn"}),(0,m.K$)(v(e)),t())}}),n=setTimeout(()=>{t(),clearTimeout(n),(0,m.xO)()},18e4)}(w)}return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:k},userId:N}}},79749:(e,t,n)=>{let i;n.d(t,{A:()=>s});let a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},r=new Uint8Array(16),o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));let s=function(e,t,n){if(a.randomUUID&&!t&&!e)return a.randomUUID();let s=(e=e||{}).random||(e.rng||function(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return function(e,t=0){return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}(s)}}}]);